/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => GenerateMarkdownPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/views/generate-markdown.ts
var import_obsidian4 = require("obsidian");

// src/utils.ts
var import_obsidian = require("obsidian");
var fixSpaceInName = (name) => {
  return name.replace(/[\u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000\uFEFF]/, " ").trim();
};
var getNoteByName = async (app2, path) => {
  const file = app2.vault.getAbstractFileByPath(path);
  if (!(file instanceof import_obsidian.TFile))
    return "";
  return await app2.vault.cachedRead(file);
};

// src/views/generate-slides-markdown.ts
var SlidesMarkdown = class {
  constructor(slides, title, hasTitleSlide, hasLastSlide) {
    this.slides = [];
    this.slideshow = "";
    this.slides = slides;
    this.slideshow += this.createProperties();
    if (hasTitleSlide)
      this.slideshow += this.createTitleSlide(title);
    slides.forEach((slide) => {
      if (slide.type === "basic")
        this.slideshow += this.createBasicSlide(slide.link.name);
      else if (slide.type === "split")
        this.slideshow += this.createSplitSlide(slide.link.name);
    });
    if (hasLastSlide)
      this.slideshow += this.createLastSlide();
    return this;
  }
  createProperties() {
    return `---
theme: consult
height: 540
margin: 0
maxScale: 4
---

`;
  }
  createTitleSlide(title) {
    return `
<!-- slide template="[[tpl-con-title]]" -->

## ${title}
::: block
#### add author here
:::

`;
  }
  createLastSlide() {
    return `
---
<!-- slide template="[[tpl-con-splash]]" -->

# **Thank you for your attention**

`;
  }
  createBasicSlide(name) {
    return `
---
<!-- slide template="[[tpl-con-default-box]]" -->

::: title
### _**${name}**_
:::

::: block
-
-
-
:::

`;
  }
  createSplitSlide(name) {
    return `
---
<!-- slide template="[[tpl-con-2-1-box]]" -->

::: title
### _**${name}**_
:::

::: left
**text in left box**
- lorem ipsum
-
-
:::

::: right
**text in right box**
- lorem ipsum
-
-
:::

`;
  }
};

// src/components/Button.ts
var Button = class {
  constructor(element, text, onClick, args) {
    this.btn = element.createEl("button", { text, ...args });
    this.btn.onclick = () => {
      onClick(this);
    };
    return this;
  }
};

// src/components/Link.ts
var BaseLink = class {
  constructor(context, element, name) {
    this.context = context;
    this.element = element;
    this.name = name;
    this.render();
  }
  render() {
    const hrefTitle = this.element.createEl("a", { text: this.name, cls: "cont__title" });
    hrefTitle.onclick = () => {
      this.context.workspace.openLinkText(this.name, "");
    };
  }
};
var Link = class {
  constructor(context, element, link, renderNow = true) {
    this.toggledState = false;
    this.link = link;
    this.context = context;
    this.element = element;
    if (renderNow)
      this.render(false);
    return this;
  }
  render(state) {
    this.a = this.element.createEl("a", { text: this.link.name, cls: "link" });
    !this.link.exists && this.a.addClass("cont__link-not-exist");
    this.link.inline && this.a.addClass("inline");
    this.a.onclick = () => {
      this.context.workspace.openLinkText(this.link.name, "");
      !this.link.exists && this.a.removeClass("cont__link-not-exist");
    };
    this.toggle(state);
  }
  toggle(state) {
    if (state)
      this.a.removeClass("strikethrough");
    else
      this.a.addClass("strikethrough");
  }
};

// src/components/SaveModal.ts
var import_obsidian2 = require("obsidian");
var SaveModal = class extends import_obsidian2.Modal {
  constructor(app2, onSubmit) {
    super(app2);
    this.isDisabled = true;
    this.onSubmit = onSubmit;
  }
  getFolders() {
    const folders = this.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian2.TFolder);
    return folders.reduce((obj, item) => (obj[item.path] = item.path, obj), {});
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Save as" });
    const folders = this.getFolders();
    new import_obsidian2.Setting(contentEl).setName("File name: ").addText((text) => text.onChange((value) => {
      this.name = value;
    }));
    new import_obsidian2.Setting(contentEl).setName("Select folder: ").addDropdown((dropdown) => dropdown.addOptions(folders).onChange((value) => {
      this.folder = value;
    }));
    new import_obsidian2.Setting(contentEl).addButton((btn) => btn.setButtonText("Generate note").setCta().onClick(() => {
      var _a;
      this.close();
      this.folder = (_a = this.folder) != null ? _a : this.app.vault.getRoot().path;
      this.onSubmit((0, import_obsidian2.normalizePath)(`${this.folder}/${this.name}.md`));
    }));
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/TreeMenu.ts
function flattenChildren(link, children) {
  if ("children" in link) {
    const childrenLinkNames = link.children.map((l) => l.name);
    children.push(...childrenLinkNames);
    link.children.forEach((l) => {
      flattenChildren(l, children);
    });
  }
  return children;
}
var TreeMenu = class {
  constructor(app2, structure, linksTree, event) {
    this.ignoredLinks = [];
    this.linksTree = [];
    this.app = app2;
    let menu = structure.createEl("div", { cls: "tree-menu" });
    this.UL = menu.createEl("ul");
    this.linksTree = linksTree;
    this.render(this.linksTree, this.UL, [], event);
  }
  render(links, menuEl, childrenLinks, event) {
    if (!childrenLinks)
      childrenLinks = [];
    links.forEach((link) => {
      const li = menuEl.createEl("li");
      const linkEl = new Link(this.app, li, link, false);
      let state = !childrenLinks.includes(linkEl.link.name);
      if (!link.exists)
        state = false;
      new Checkbox(li, state, link.exists, () => {
        const ignoredChildren = [linkEl.link.name, ...flattenChildren(linkEl.link, [])];
        if (state == false) {
          childrenLinks = childrenLinks.filter((cl) => !ignoredChildren.includes(cl));
        } else {
          childrenLinks.push(...ignoredChildren);
          childrenLinks = [...new Set(childrenLinks)];
        }
        this.ignoredLinks = childrenLinks;
        this.UL.empty();
        this.render(this.linksTree, this.UL, childrenLinks, event);
      });
      linkEl.render(state);
      if ("children" in link) {
        const ul = li.createEl("ul");
        this.render(link.children, ul, childrenLinks, event);
      }
    });
    return event(this.ignoredLinks);
  }
};

// src/components/Checkbox.ts
var Checkbox = class {
  constructor(element, state, exists, onClick) {
    this.cb = element.createEl("input", {
      type: "checkbox",
      cls: "checkbox-btn"
    });
    this.cb.checked = state;
    if (!exists) {
      this.cb.disabled = true;
      this.cb.checked = false;
      this.cb.addClass("checkbox-btn-disabled");
    }
    this.cb.onclick = () => {
      onClick(this);
    };
    return this;
  }
};

// src/components/SlidesModal.ts
var import_obsidian3 = require("obsidian");
var SlidesModal = class extends import_obsidian3.Modal {
  constructor(app2, links, ignoredLinks, onSubmit) {
    super(app2);
    this.flattenedLinks = [];
    this.maxDepth = 1;
    this.titleSlide = false;
    this.lastSlide = false;
    this.links = links;
    this.ignoredLinks = ignoredLinks;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h1", { text: "Slideshow" });
    this.flattenLinks(this.links);
    const settingsEl = contentEl.createEl("div");
    const depthStr = (depth) => `Slides depth: ${depth}`;
    this.depth = this.maxDepth;
    contentEl.createEl("div", { text: "Include: " });
    const titleSlideEl = contentEl.createEl("div");
    new Checkbox(titleSlideEl, this.titleSlide, true, () => {
      this.titleSlide = !this.titleSlide;
      this.render();
    });
    titleSlideEl.createEl("span", { text: "title slide" });
    const lastSlideEl = contentEl.createEl("div");
    new Checkbox(lastSlideEl, this.lastSlide, true, () => {
      this.lastSlide = !this.lastSlide;
      this.render();
    });
    lastSlideEl.createEl("span", { text: "last slide" });
    this.linksEl = contentEl.createEl("div");
    new import_obsidian3.Setting(settingsEl).setName(depthStr(this.maxDepth)).setDesc("Set depth of preview content to create slides from.").addSlider((slider) => slider.setValue(this.maxDepth).setLimits(1, this.maxDepth, 1).onChange(async (value) => {
      const depthEl = settingsEl.children[0].children[0].children[0];
      depthEl.empty();
      depthEl.createEl("div", { text: depthStr(value) });
      this.depth = value;
      slider.showTooltip();
      this.render();
    }));
    this.render();
    new import_obsidian3.ButtonComponent(contentEl).setButtonText("Generate").onClick(() => {
      this.onSubmit(this.slides, this.titleSlide, this.lastSlide);
      this.close();
    });
  }
  flattenLinks(links) {
    links.forEach((link) => {
      if (this.ignoredLinks.includes(link.name))
        return;
      if (link.level && this.maxDepth <= link.level)
        this.maxDepth = link.level;
      this.flattenedLinks.push(link);
      if ("children" in link && link.level) {
        this.flattenLinks(link.children);
      }
    });
  }
  render() {
    this.linksEl.empty();
    const depthLinks = this.flattenedLinks.filter((link) => link.level && link.level <= this.depth);
    this.slides = depthLinks.map((link) => ({ link, type: "basic" }));
    if (this.titleSlide) {
      const slide = this.linksEl.createEl("div", { cls: "slide-row" });
      slide.createEl("span", { text: "1. Title slide" });
      const dropdownEl = slide.createEl("span", { cls: "row-right" });
      new import_obsidian3.DropdownComponent(dropdownEl).setDisabled(true).addOption("title", "title");
    }
    depthLinks.forEach((link) => {
      const slide = this.linksEl.createEl("div", { cls: "slide-row" });
      slide.createEl("span", { text: `${link.level}: ${link.name}` });
      const dropdownEl = slide.createEl("span", { cls: "row-right" });
      new import_obsidian3.DropdownComponent(dropdownEl).addOption("basic", "basic").addOption("split", "split").addOption("image", "image").onChange((value) => {
        const index = this.slides.findIndex(({ link: slideLink }) => slideLink.name === link.name);
        this.slides[index]["type"] = value;
      });
    });
    if (this.lastSlide) {
      const slide = this.linksEl.createEl("div", { cls: "slide-row" });
      slide.createEl("span", { text: "1. Last slide" });
      const dropdownEl = slide.createEl("span", { cls: "row-right" });
      new import_obsidian3.DropdownComponent(dropdownEl).setDisabled(true).addOption("last", "last");
    }
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/generate-markdown.ts
var VIEW_CONTENT_COMPOSE_NOTES = "view-generate-markdown";
var _GenerateMarkdown = class extends import_obsidian4.ItemView {
  constructor(leaf, settings) {
    super(leaf);
    this.linksTree = [];
    this.loadedFiles = [];
    this.maxLevel = 0;
    this.processed = [];
    this.mainNameLinks = [];
    this.markdown = "";
    this.ignoredLinks = [];
    this.images = [];
    this.previewContent = "";
    this.settings = settings;
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    this.container = container;
    container.empty();
    this.toolbar = container.createEl("div");
    this.generatePreviewParent = this.toolbar.createEl("span");
    this.generateMarkdownParent = this.toolbar.createEl("span");
    this.generateSlidesParent = this.toolbar.createEl("span");
    this.structure = this.container.createEl("div");
    new Button(this.generatePreviewParent, "Generate preview", () => {
      this.linksTree = [];
      this.maxLevel = 0;
      this.processed = [];
      this.mainNameLinks = [];
      this.ignoredLinks = [];
      this.markdown = "";
      this.structure.empty();
      this.generateMarkdownParent.empty();
      this.generateSlidesParent.empty();
      this.readSelectedNote();
    });
  }
  parseLinks(text, index = false) {
    const links = text.matchAll(/\[\[(.*?)\]\]/g);
    let cleanLinks = [...links].map((l) => l[1]);
    cleanLinks = [...new Set(cleanLinks)];
    cleanLinks = cleanLinks.filter((cl) => !cl.startsWith("#"));
    cleanLinks = cleanLinks.filter((cl) => !cl.startsWith(`${this.settings.literatureNote}#`));
    const existingNotes = cleanLinks.map((cl) => {
      cl = fixSpaceInName(cl);
      if (!!_GenerateMarkdown.imageTypes.filter((it) => cl.includes(it.toLowerCase())).length) {
        this.images.push(cl);
        return false;
      }
      let isInline = true;
      if (text.includes(this.settings.listOfLinksKeyword)) {
        let [inlineText, linksText] = text.split(this.settings.listOfLinksKeyword);
        if (!inlineText.includes(cl))
          isInline = false;
      }
      let isIndex = false;
      if (index) {
        isInline = false;
        isIndex = true;
      }
      const note = this.loadedFiles.find((f) => f["basename"] === cl);
      return {
        name: cl,
        exists: !!note,
        inline: isInline,
        index: isIndex,
        path: note == null ? void 0 : note.path
      };
    }).filter(Boolean);
    return existingNotes;
  }
  async readSelectedNote() {
    this.loadedFiles = app.vault.getMarkdownFiles();
    const activeNote = this.app.workspace.getActiveFile();
    if (!activeNote) {
      new import_obsidian4.Notice(`Selected note is invalid.`);
      throw new Error("Selected note is invalid.");
    }
    const activeNoteText = await getNoteByName(this.app, activeNote.path);
    const mainContentLinks = this.parseLinks(activeNoteText, true);
    this.mainNameLinks = mainContentLinks.map((l) => l.name);
    this.linksTree = await this.generateNotesHierarchy(mainContentLinks);
    const title = activeNote.basename;
    new BaseLink(this.app, this.structure, title);
    new TreeMenu(this.app, this.structure, this.linksTree, (ignoredLinks) => {
      this.ignoredLinks = ignoredLinks;
    });
    new Button(this.generateMarkdownParent, "Generate markdown", () => {
      this.markdown = "";
      this.generateMarkdownFile(this.linksTree, activeNoteText);
    }, { cls: "generate-markdown-btn" });
    new Button(this.generateSlidesParent, "Generate slideshow", () => {
      new SlidesModal(this.app, this.linksTree, this.ignoredLinks, (slides, hasTitleSlide, hasLastSlide) => {
        const slidesMD = new SlidesMarkdown(slides, title, hasTitleSlide, hasLastSlide);
        new SaveModal(this.app, async (path) => {
          await this.app.vault.adapter.write(path, slidesMD.slideshow);
          new import_obsidian4.Notice(`Slideshow ${path} created successfully`);
          this.app.workspace.openLinkText(path, "");
        }).open();
      }).open();
    }, { cls: "generate-markdown-btn" });
  }
  async generateMarkdownFile(links, mainNote) {
    this.composeMarkdown(links);
    this.markdown = this.markdown.trim();
    if (this.settings.insertIndexNote) {
      this.mainNameLinks.forEach((mnl) => {
        mnl = fixSpaceInName(mnl);
        mainNote = mainNote.replaceAll(`[[${mnl}]]`, `[[#${mnl}]]`);
      });
      this.markdown = mainNote + "\n" + this.markdown;
    }
    if (this.settings.insertPreviewContent) {
      const contentPreview = this.makeContentPreviewMD(links, "");
      this.markdown = contentPreview + "\n" + this.markdown;
    }
    new SaveModal(this.app, async (path) => {
      await this.app.vault.adapter.write(path, this.markdown);
      new import_obsidian4.Notice(`Note ${path} created successfully`);
      this.app.workspace.openLinkText(path, "");
    }).open();
  }
  composeMarkdown(links) {
    const inlineLinks = links.filter((link) => link.inline);
    this.markdown = this.insertToNearestNewLine(this.markdown, inlineLinks);
    links.forEach((link) => {
      if (this.ignoredLinks.includes(link.name))
        return;
      let note = link.note.trim();
      if (note.length == 0)
        return;
      note = this.cleanNote(link, note);
      if (note.includes(this.settings.listOfLinksKeyword)) {
        let [importantPart, endPart] = note.split(this.settings.listOfLinksKeyword);
        note = importantPart.trim();
      }
      const title = this.transformTitle(link);
      note = `${title}
${note}`;
      if (!link.inline)
        this.markdown += `
${note}
`;
      this.markdown = this.markdown.replace(`[[${link.name}]]`, `[[#${link.name}]]`);
      if ("children" in link)
        this.composeMarkdown(link.children);
    });
  }
  cleanNote(link, note) {
    let noteRows = note.split("\n");
    let firstRow = fixSpaceInName(noteRows[0]);
    if (firstRow.includes(`# ${link.name}`)) {
      noteRows.shift();
      note = noteRows.join("\n").trim();
    }
    note = note.replace(/#[\w\s]+\n/g, "");
    return note;
  }
  transformTitle(link) {
    let title = "";
    if (link.inline) {
      title = `##### ${link.name}`;
    } else {
      const nestedLevel = Array(link.level).fill("#").join("");
      title = `${nestedLevel} ${link.name}`;
    }
    return title;
  }
  async generateNotesHierarchy(links) {
    const linksObj = await this.createParentStructure(links, 0, []);
    let linksArr = [];
    Object.keys(linksObj).forEach((key) => {
      var _a, _b;
      const { parentRef, ...rest } = linksObj[key];
      linksArr.push({ ...rest, parent: (_b = (_a = linksObj[key]) == null ? void 0 : _a.parentRef) == null ? void 0 : _b.name });
    });
    const buildChildrenFromParents = (arr, parent) => {
      let children = [];
      for (let i = 0; i < arr.length; i++) {
        if (arr[i].parent == parent) {
          const grandChildren = buildChildrenFromParents(arr, arr[i].name);
          if (grandChildren.length) {
            arr[i].children = grandChildren;
          }
          children.push(arr[i]);
        }
      }
      return children;
    };
    return buildChildrenFromParents(linksArr, void 0);
  }
  async createParentStructure(links, level, processed, parentRef, titleMapping) {
    titleMapping = titleMapping != null ? titleMapping : {};
    for await (const [order, link] of links.entries()) {
      if (this.mainNameLinks.includes(link.name) && level != 0)
        continue;
      if (processed.includes(link.name))
        continue;
      processed.push(link.name);
      let note = await getNoteByName(this.app, link.path);
      const subLinks = this.parseLinks(note);
      this.maxLevel = level + 1;
      if (note.includes(this.settings.listOfLinksKeyword)) {
        let [importantPart, endPart] = note.split(this.settings.listOfLinksKeyword);
        note = importantPart.trim();
      }
      titleMapping[link.name] = { ...link, parentRef, level: this.maxLevel, order, note };
      if (links.length > 0)
        await this.createParentStructure(subLinks, this.maxLevel, processed, titleMapping[link.name], titleMapping);
    }
    return titleMapping;
  }
  makeContentPreviewMD(links, previewContent = "") {
    links.forEach((link) => {
      if (link.exists && link.level) {
        if (this.ignoredLinks.includes(link.name))
          return;
        const tabs = Array(link.level - 1).fill("	").join("");
        previewContent += `${tabs}- [[#${link.name}]]
`;
      }
      if ("children" in link)
        previewContent += this.makeContentPreviewMD(link.children);
    });
    return previewContent;
  }
  insertToNearestNewLine(note, links) {
    let specialArr = [];
    const rows = note.split("\n");
    const emptyLines = [];
    rows.forEach((row, index) => {
      if (row == "") {
        specialArr.push([]);
        emptyLines.push(index);
      } else
        specialArr.push(row);
    });
    specialArr.push([]);
    emptyLines.push(specialArr.length - 1);
    links.forEach((link) => {
      const index = specialArr.findIndex((row) => typeof row === "string" && row.includes(`[[${link.name}]]`));
      const findClosestHigher = emptyLines.filter((candidate) => candidate > index)[0];
      const title = this.transformTitle(link);
      let note2 = link.note.trim();
      if (note2.length == 0)
        return;
      if (this.ignoredLinks.includes(link.name))
        return;
      note2 = this.cleanNote(link, note2);
      specialArr[findClosestHigher].push("\n", title, note2);
    });
    return specialArr.map((row) => typeof row === "string" ? row : row.join("\n")).join("\n");
  }
  async onClose() {
  }
  getViewType() {
    return VIEW_CONTENT_COMPOSE_NOTES;
  }
  getDisplayText() {
    return "Notes Merger";
  }
};
var GenerateMarkdown = _GenerateMarkdown;
GenerateMarkdown.imageTypes = ["jpg", "jpeg", "png", "gif", "webp", "tiff", "bmp"].map((it) => `.${it}`);

// main.ts
var DEFAULT_SETTINGS = {
  listOfLinksKeyword: "Kam d\xE1l",
  literatureNote: "Literature",
  insertPreviewContent: true,
  insertIndexNote: false,
  removeStatusTag: true
};
var GenerateMarkdownPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new GenerateMarkdownPluginSettingTab(this.app, this));
    this.registerView(VIEW_CONTENT_COMPOSE_NOTES, (leaf) => new GenerateMarkdown(leaf, this.settings));
    this.addRibbonIcon("scroll", "NotesMerger", () => {
      this.activateGenerateMarkdownView();
    });
  }
  async activateGenerateMarkdownView() {
    if (!this.app.workspace.getLeavesOfType(VIEW_CONTENT_COMPOSE_NOTES).length) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: VIEW_CONTENT_COMPOSE_NOTES,
        active: true
      });
    }
    this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(VIEW_CONTENT_COMPOSE_NOTES)[0]);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var GenerateMarkdownPluginSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian5.Setting(containerEl).setName("List of links keyword").setDesc("Keyword to detect list of links at the end of note").addText((text) => text.setPlaceholder('Defaults to "Kam d\xE1l"').setValue(this.plugin.settings.listOfLinksKeyword).onChange(async (value) => {
      this.plugin.settings.listOfLinksKeyword = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Literature note").setDesc("Name of note with citations").addText((text) => text.setPlaceholder('Defaults to "Literature"').setValue(this.plugin.settings.literatureNote).onChange(async (value) => {
      this.plugin.settings.literatureNote = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Include generated preview").setDesc("Insert preview structure at the beginning of the merged note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.insertPreviewContent).onChange((value) => {
      this.plugin.settings.insertPreviewContent = value;
    }));
    new import_obsidian5.Setting(containerEl).setName("Include index note").setDesc("Insert index note at the beginning of the merged note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.insertIndexNote).onChange((value) => {
      this.plugin.settings.insertIndexNote = value;
    }));
    new import_obsidian5.Setting(containerEl).setName("Remove status note tag").setDesc("Always remove note status tag information from note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeStatusTag).onChange((value) => {
      this.plugin.settings.removeStatusTag = value;
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvdmlld3MvZ2VuZXJhdGUtbWFya2Rvd24udHMiLCAic3JjL3V0aWxzLnRzIiwgInNyYy92aWV3cy9nZW5lcmF0ZS1zbGlkZXMtbWFya2Rvd24udHMiLCAic3JjL2NvbXBvbmVudHMvQnV0dG9uLnRzIiwgInNyYy9jb21wb25lbnRzL0xpbmsudHMiLCAic3JjL2NvbXBvbmVudHMvU2F2ZU1vZGFsLnRzIiwgInNyYy9jb21wb25lbnRzL1RyZWVNZW51LnRzIiwgInNyYy9jb21wb25lbnRzL0NoZWNrYm94LnRzIiwgInNyYy9jb21wb25lbnRzL1NsaWRlc01vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEdlbmVyYXRlTWFya2Rvd24sIFZJRVdfQ09OVEVOVF9DT01QT1NFX05PVEVTIH0gZnJvbSAnLi9zcmMvdmlld3MvZ2VuZXJhdGUtbWFya2Rvd24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRlTWFya2Rvd25QbHVnaW5TZXR0aW5nc1R5cGUge1xuXHRsaXN0T2ZMaW5rc0tleXdvcmQ6IHN0cmluZztcblx0bGl0ZXJhdHVyZU5vdGU6IHN0cmluZztcblx0aW5zZXJ0UHJldmlld0NvbnRlbnQ6IGJvb2xlYW47XG5cdGluc2VydEluZGV4Tm90ZTogYm9vbGVhbjtcblx0cmVtb3ZlU3RhdHVzVGFnOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBHZW5lcmF0ZU1hcmtkb3duUGx1Z2luU2V0dGluZ3NUeXBlID0ge1xuXHRsaXN0T2ZMaW5rc0tleXdvcmQ6ICdLYW0gZFx1MDBFMWwnLFxuXHRsaXRlcmF0dXJlTm90ZTogJ0xpdGVyYXR1cmUnLFxuXHRpbnNlcnRQcmV2aWV3Q29udGVudDogdHJ1ZSxcblx0aW5zZXJ0SW5kZXhOb3RlOiBmYWxzZSxcblx0cmVtb3ZlU3RhdHVzVGFnOiB0cnVlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdlbmVyYXRlTWFya2Rvd25QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogR2VuZXJhdGVNYXJrZG93blBsdWdpblNldHRpbmdzVHlwZTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgR2VuZXJhdGVNYXJrZG93blBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcdFxuXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXG5cdFx0XHRWSUVXX0NPTlRFTlRfQ09NUE9TRV9OT1RFUyxcblx0XHRcdChsZWFmKSA9PiBuZXcgR2VuZXJhdGVNYXJrZG93bihsZWFmLCB0aGlzLnNldHRpbmdzKVxuXHRcdCk7XG5cdFx0XG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwic2Nyb2xsXCIsIFwiTm90ZXNNZXJnZXJcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmF0ZUdlbmVyYXRlTWFya2Rvd25WaWV3KCk7XG5cdFx0fSk7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZUdlbmVyYXRlTWFya2Rvd25WaWV3KCkge1xuXHRcdGlmICghdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX0NPTlRFTlRfQ09NUE9TRV9OT1RFUykubGVuZ3RoKSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0XHR0eXBlOiBWSUVXX0NPTlRFTlRfQ09NUE9TRV9OT1RFUyxcblx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0ICB9KTtcblx0XHR9XG5cdFxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuXHRcdCAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX0NPTlRFTlRfQ09NUE9TRV9OT1RFUylbMF1cblx0XHQpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBHZW5lcmF0ZU1hcmtkb3duUGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEdlbmVyYXRlTWFya2Rvd25QbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogR2VuZXJhdGVNYXJrZG93blBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdMaXN0IG9mIGxpbmtzIGtleXdvcmQnKVxuXHRcdFx0LnNldERlc2MoJ0tleXdvcmQgdG8gZGV0ZWN0IGxpc3Qgb2YgbGlua3MgYXQgdGhlIGVuZCBvZiBub3RlJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0RlZmF1bHRzIHRvIFwiS2FtIGRcdTAwRTFsXCInKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlzdE9mTGlua3NLZXl3b3JkKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGlzdE9mTGlua3NLZXl3b3JkID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC5zZXROYW1lKCdMaXRlcmF0dXJlIG5vdGUnKVxuXHRcdC5zZXREZXNjKCdOYW1lIG9mIG5vdGUgd2l0aCBjaXRhdGlvbnMnKVxuXHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0cyB0byBcIkxpdGVyYXR1cmVcIicpXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGl0ZXJhdHVyZU5vdGUpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxpdGVyYXR1cmVOb3RlID0gdmFsdWU7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ0luY2x1ZGUgZ2VuZXJhdGVkIHByZXZpZXcnKVxuXHRcdC5zZXREZXNjKCdJbnNlcnQgcHJldmlldyBzdHJ1Y3R1cmUgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWVyZ2VkIG5vdGUuJylcblx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRQcmV2aWV3Q29udGVudClcblx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmluc2VydFByZXZpZXdDb250ZW50ID0gdmFsdWU7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZSgnSW5jbHVkZSBpbmRleCBub3RlJylcblx0XHQuc2V0RGVzYygnSW5zZXJ0IGluZGV4IG5vdGUgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWVyZ2VkIG5vdGUuJylcblx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRJbmRleE5vdGUpXG5cdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRJbmRleE5vdGUgPSB2YWx1ZTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC5zZXROYW1lKCdSZW1vdmUgc3RhdHVzIG5vdGUgdGFnJylcblx0XHQuc2V0RGVzYygnQWx3YXlzIHJlbW92ZSBub3RlIHN0YXR1cyB0YWcgaW5mb3JtYXRpb24gZnJvbSBub3RlLicpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlU3RhdHVzVGFnKVxuXHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlU3RhdHVzVGFnID0gdmFsdWU7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0fVxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBmaXhTcGFjZUluTmFtZSwgZ2V0Tm90ZUJ5TmFtZSB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IExpbmtUcmVlVHlwZSwgQnVpbGRMaW5rVHJlZVR5cGUsIFNsaWRlVHlwZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IEdlbmVyYXRlTWFya2Rvd25QbHVnaW5TZXR0aW5nc1R5cGUgfSBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IFNsaWRlc01hcmtkb3duIH0gZnJvbSAnLi9nZW5lcmF0ZS1zbGlkZXMtbWFya2Rvd24nO1xuXG5pbXBvcnQge1xuXHRCdXR0b24sIFxuXHRCYXNlTGluayxcblx0U2F2ZU1vZGFsLCBcblx0VHJlZU1lbnUsXG5cdFNsaWRlc01vZGFsXG59IGZyb20gJy4uL2NvbXBvbmVudHMvaW5kZXgnO1xuXG5cbmV4cG9ydCBjb25zdCBWSUVXX0NPTlRFTlRfQ09NUE9TRV9OT1RFUyA9IFwidmlldy1nZW5lcmF0ZS1tYXJrZG93blwiO1xuXG5cbmV4cG9ydCBjbGFzcyBHZW5lcmF0ZU1hcmtkb3duIGV4dGVuZHMgSXRlbVZpZXcge1xuXHRcblx0c2V0dGluZ3M6IEdlbmVyYXRlTWFya2Rvd25QbHVnaW5TZXR0aW5nc1R5cGU7XG5cblx0Y29udGFpbmVyOiBFbGVtZW50O1xuXHR0b29sYmFyOiBFbGVtZW50O1xuXHRzdHJ1Y3R1cmU6IEVsZW1lbnQ7XG5cdGdlbmVyYXRlUHJldmlld1BhcmVudDogRWxlbWVudDtcblx0Z2VuZXJhdGVNYXJrZG93blBhcmVudDogRWxlbWVudDtcblx0Z2VuZXJhdGVTbGlkZXNQYXJlbnQ6IEVsZW1lbnQ7XG5cblx0bGlua3NUcmVlOiBMaW5rVHJlZVR5cGVbXSA9IFtdO1xuXHRsb2FkZWRGaWxlczogVEFic3RyYWN0RmlsZVtdID0gW107XG5cdG1heExldmVsOiBudW1iZXIgPSAwO1xuXHRwcm9jZXNzZWQ6IHN0cmluZ1tdID0gW107XG5cdG1haW5OYW1lTGlua3M6IHN0cmluZ1tdID0gW107XG5cblx0bWFya2Rvd246IHN0cmluZyA9IFwiXCI7XG5cdGlnbm9yZWRMaW5rczogc3RyaW5nW10gPSBbXTtcblx0aW1hZ2VzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdHByZXZpZXdDb250ZW50OiBzdHJpbmcgPSAnJztcblxuXHRzdGF0aWMgaW1hZ2VUeXBlcyA9IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2dpZicsICd3ZWJwJywgJ3RpZmYnLCAnYm1wJ10ubWFwKChpdDogc3RyaW5nKSA9PiBgLiR7aXR9YCk7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgc2V0dGluZ3M6IEdlbmVyYXRlTWFya2Rvd25QbHVnaW5TZXR0aW5nc1R5cGUpIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcblxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0dGhpcy50b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIpO1xuXHRcdHRoaXMuZ2VuZXJhdGVQcmV2aWV3UGFyZW50ID0gdGhpcy50b29sYmFyLmNyZWF0ZUVsKCdzcGFuJyk7XG5cdFx0dGhpcy5nZW5lcmF0ZU1hcmtkb3duUGFyZW50ID0gdGhpcy50b29sYmFyLmNyZWF0ZUVsKCdzcGFuJyk7XG5cdFx0dGhpcy5nZW5lcmF0ZVNsaWRlc1BhcmVudCA9IHRoaXMudG9vbGJhci5jcmVhdGVFbCgnc3BhbicpO1xuXHRcdHRoaXMuc3RydWN0dXJlID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIik7XG5cblx0XHRuZXcgQnV0dG9uKHRoaXMuZ2VuZXJhdGVQcmV2aWV3UGFyZW50LCAnR2VuZXJhdGUgcHJldmlldycsICgpID0+IHtcblx0XHRcdC8vIGVtcHR5IHN0YXRlXG5cdFx0XHR0aGlzLmxpbmtzVHJlZSA9IFtdO1xuXHRcdFx0dGhpcy5tYXhMZXZlbCA9IDA7XG5cdFx0XHR0aGlzLnByb2Nlc3NlZCA9IFtdO1xuXHRcdFx0dGhpcy5tYWluTmFtZUxpbmtzID0gW107XG5cdFx0XHR0aGlzLmlnbm9yZWRMaW5rcyA9IFtdO1xuXHRcdFx0dGhpcy5tYXJrZG93biA9IFwiXCI7XG5cdFx0XHRcblx0XHRcdHRoaXMuc3RydWN0dXJlLmVtcHR5KCk7XG5cdFx0XHR0aGlzLmdlbmVyYXRlTWFya2Rvd25QYXJlbnQuZW1wdHkoKTtcblx0XHRcdHRoaXMuZ2VuZXJhdGVTbGlkZXNQYXJlbnQuZW1wdHkoKTtcblx0XHRcdHRoaXMucmVhZFNlbGVjdGVkTm90ZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cGFyc2VMaW5rcyh0ZXh0OiBzdHJpbmcsIGluZGV4OiBib29sZWFuID0gZmFsc2UpIHtcblx0XHRjb25zdCBsaW5rcyA9IHRleHQubWF0Y2hBbGwoL1xcW1xcWyguKj8pXFxdXFxdL2cpO1xuXHRcdGxldCBjbGVhbkxpbmtzID0gWy4uLmxpbmtzXS5tYXAobCA9PiBsWzFdKTtcblxuXHRcdGNsZWFuTGlua3MgPSBbLi4ubmV3IFNldChjbGVhbkxpbmtzKV07XG5cblx0XHQvLyBmaWx0ZXIgb3V0IGFuY2hvciBsaW5rcyAoW1sjZm9vYmFyXV0pXG5cdFx0Y2xlYW5MaW5rcyA9IGNsZWFuTGlua3MuZmlsdGVyKGNsID0+ICFjbC5zdGFydHNXaXRoKCcjJykpO1xuXG5cdFx0Y2xlYW5MaW5rcyA9IGNsZWFuTGlua3MuZmlsdGVyKGNsID0+ICFjbC5zdGFydHNXaXRoKGAke3RoaXMuc2V0dGluZ3MubGl0ZXJhdHVyZU5vdGV9I2ApKTtcblxuXHRcdGNvbnN0IGV4aXN0aW5nTm90ZXMgPSBjbGVhbkxpbmtzLm1hcCgoY2w6IHN0cmluZykgPT4ge1xuXHRcdFx0Y2wgPSBmaXhTcGFjZUluTmFtZShjbCk7XG5cblx0XHRcdGlmICghIUdlbmVyYXRlTWFya2Rvd24uaW1hZ2VUeXBlcy5maWx0ZXIoKGl0OiBzdHJpbmcpID0+IGNsLmluY2x1ZGVzKGl0LnRvTG93ZXJDYXNlKCkpKS5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5pbWFnZXMucHVzaChjbClcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgaXNJbmxpbmUgPSB0cnVlO1x0XHRcdFxuXHRcdFx0aWYgKHRleHQuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5saXN0T2ZMaW5rc0tleXdvcmQpKSB7XG5cdFx0XHRcdGxldCBbaW5saW5lVGV4dCwgbGlua3NUZXh0XSA9IHRleHQuc3BsaXQodGhpcy5zZXR0aW5ncy5saXN0T2ZMaW5rc0tleXdvcmQpO1xuXHRcdFx0XHRpZiAoIWlubGluZVRleHQuaW5jbHVkZXMoY2wpKVxuXHRcdFx0XHRcdGlzSW5saW5lID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBpc0luZGV4ID0gZmFsc2U7XG5cdFx0XHRpZiAoaW5kZXgpIHtcblx0XHRcdFx0aXNJbmxpbmUgPSBmYWxzZTtcblx0XHRcdFx0aXNJbmRleCA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmxvYWRlZEZpbGVzLmZpbmQoKGY6IFRGaWxlKSA9PiBmWydiYXNlbmFtZSddID09PSBjbCk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWU6IGNsLFxuXHRcdFx0XHRleGlzdHM6ICEhbm90ZSxcdFxuXHRcdFx0XHRpbmxpbmU6IGlzSW5saW5lLFxuXHRcdFx0XHRpbmRleDogaXNJbmRleCxcblx0XHRcdFx0cGF0aDogbm90ZT8ucGF0aFxuXHRcdFx0fTtcblx0XHR9KS5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRyZXR1cm4gZXhpc3RpbmdOb3RlcyBhcyBMaW5rVHJlZVR5cGVbXTtcblx0fVxuXG5cdGFzeW5jIHJlYWRTZWxlY3RlZE5vdGUoKSB7XG5cdFx0dGhpcy5sb2FkZWRGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cblx0XHRjb25zdCBhY3RpdmVOb3RlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuXHRcdGlmICghYWN0aXZlTm90ZSkge1xuXHRcdFx0bmV3IE5vdGljZShgU2VsZWN0ZWQgbm90ZSBpcyBpbnZhbGlkLmApO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU2VsZWN0ZWQgbm90ZSBpcyBpbnZhbGlkLlwiKTtcblx0XHR9XG5cdFx0Y29uc3QgYWN0aXZlTm90ZVRleHQgPSBhd2FpdCBnZXROb3RlQnlOYW1lKHRoaXMuYXBwLCBhY3RpdmVOb3RlLnBhdGgpO1xuXG5cdFx0Y29uc3QgbWFpbkNvbnRlbnRMaW5rcyA9IHRoaXMucGFyc2VMaW5rcyhhY3RpdmVOb3RlVGV4dCwgdHJ1ZSk7XG5cdFx0XG5cdFx0dGhpcy5tYWluTmFtZUxpbmtzID0gbWFpbkNvbnRlbnRMaW5rcy5tYXAoKGw6IExpbmtUcmVlVHlwZSkgPT4gbC5uYW1lKTtcblxuXHRcdHRoaXMubGlua3NUcmVlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZU5vdGVzSGllcmFyY2h5KG1haW5Db250ZW50TGlua3MpO1xuXG5cdFx0Y29uc3QgdGl0bGUgPSBhY3RpdmVOb3RlLmJhc2VuYW1lO1xuXHRcdG5ldyBCYXNlTGluayh0aGlzLmFwcCwgdGhpcy5zdHJ1Y3R1cmUsIHRpdGxlKTtcblxuXHRcdG5ldyBUcmVlTWVudSh0aGlzLmFwcCwgdGhpcy5zdHJ1Y3R1cmUsIHRoaXMubGlua3NUcmVlLCAoaWdub3JlZExpbmtzOiBzdHJpbmdbXSkgPT4ge1xuXHRcdFx0dGhpcy5pZ25vcmVkTGlua3MgPSBpZ25vcmVkTGlua3M7XG5cdFx0fSk7XG5cblx0XHRuZXcgQnV0dG9uKHRoaXMuZ2VuZXJhdGVNYXJrZG93blBhcmVudCwgJ0dlbmVyYXRlIG1hcmtkb3duJywgKCkgPT4ge1xuXHRcdFx0XG5cdFx0XHQvLyBjbGVhbnVwXG5cdFx0XHR0aGlzLm1hcmtkb3duID0gXCJcIjtcblxuXHRcdFx0dGhpcy5nZW5lcmF0ZU1hcmtkb3duRmlsZSh0aGlzLmxpbmtzVHJlZSwgYWN0aXZlTm90ZVRleHQpO1xuXHRcdH0sIHsgY2xzOiAnZ2VuZXJhdGUtbWFya2Rvd24tYnRuJyB9KTtcblxuXHRcdG5ldyBCdXR0b24odGhpcy5nZW5lcmF0ZVNsaWRlc1BhcmVudCwgJ0dlbmVyYXRlIHNsaWRlc2hvdycsICgpID0+IHtcblx0XHRcdG5ldyBTbGlkZXNNb2RhbCh0aGlzLmFwcCwgdGhpcy5saW5rc1RyZWUsIHRoaXMuaWdub3JlZExpbmtzLCAoc2xpZGVzOiBTbGlkZVR5cGVbXSwgaGFzVGl0bGVTbGlkZTogYm9vbGVhbiwgaGFzTGFzdFNsaWRlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNsaWRlc01EID0gbmV3IFNsaWRlc01hcmtkb3duKHNsaWRlcywgdGl0bGUsIGhhc1RpdGxlU2xpZGUsIGhhc0xhc3RTbGlkZSk7XG5cblx0XHRcdFx0bmV3IFNhdmVNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKHBhdGg6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgc2xpZGVzTUQuc2xpZGVzaG93KVxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFNsaWRlc2hvdyAke3BhdGh9IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCBcIlwiKVxuXG5cdFx0XHRcdH0pLm9wZW4oKTtcblx0XHRcdH0pLm9wZW4oKTtcblx0XHR9LCB7IGNsczogJ2dlbmVyYXRlLW1hcmtkb3duLWJ0bicgfSlcblx0fVxuXG5cdGFzeW5jIGdlbmVyYXRlTWFya2Rvd25GaWxlKGxpbmtzOiBMaW5rVHJlZVR5cGVbXSwgbWFpbk5vdGU6IHN0cmluZykge1xuXG5cdFx0dGhpcy5jb21wb3NlTWFya2Rvd24obGlua3MpO1xuXG5cdFx0dGhpcy5tYXJrZG93biA9IHRoaXMubWFya2Rvd24udHJpbSgpO1xuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaW5zZXJ0SW5kZXhOb3RlKSB7XG5cdFx0XHQvLyB0cmFuc2Zvcm0gbGlua3MgdG8gYW5jaG9yIGluIGluZGV4IG5vdGUgXG5cdFx0XHR0aGlzLm1haW5OYW1lTGlua3MuZm9yRWFjaCgobW5sOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0bW5sID0gZml4U3BhY2VJbk5hbWUobW5sKTtcblx0XHRcdFx0bWFpbk5vdGUgPSBtYWluTm90ZS5yZXBsYWNlQWxsKGBbWyR7bW5sfV1dYCwgYFtbIyR7bW5sfV1dYClcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLm1hcmtkb3duID0gbWFpbk5vdGUgKyAnXFxuJyArIHRoaXMubWFya2Rvd247XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaW5zZXJ0UHJldmlld0NvbnRlbnQpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRQcmV2aWV3ID0gdGhpcy5tYWtlQ29udGVudFByZXZpZXdNRChsaW5rcywgXCJcIik7XG5cdFx0XHR0aGlzLm1hcmtkb3duID0gY29udGVudFByZXZpZXcgKyAnXFxuJyArIHRoaXMubWFya2Rvd247XG5cdFx0fVxuXG5cdFx0bmV3IFNhdmVNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKHBhdGg6IHN0cmluZykgPT4ge1x0XHRcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgdGhpcy5tYXJrZG93bilcblx0XHRcdG5ldyBOb3RpY2UoYE5vdGUgJHtwYXRofSBjcmVhdGVkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCBcIlwiKTtcblx0XHR9KS5vcGVuKCk7XG5cdFx0XG5cdH1cblxuXHRjb21wb3NlTWFya2Rvd24obGlua3M6IExpbmtUcmVlVHlwZVtdKSB7XG5cdFx0Y29uc3QgaW5saW5lTGlua3MgPSBsaW5rcy5maWx0ZXIobGluayA9PiBsaW5rLmlubGluZSk7XG5cdFx0dGhpcy5tYXJrZG93biA9IHRoaXMuaW5zZXJ0VG9OZWFyZXN0TmV3TGluZSh0aGlzLm1hcmtkb3duLCBpbmxpbmVMaW5rcyk7XG5cblx0XHRsaW5rcy5mb3JFYWNoKChsaW5rOiBMaW5rVHJlZVR5cGUpID0+IHtcblxuXHRcdFx0aWYgKHRoaXMuaWdub3JlZExpbmtzLmluY2x1ZGVzKGxpbmsubmFtZSkpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0Ly8gdHJpbSBlbnRlcnMgYW5kIHNwYWNlc1xuXHRcdFx0bGV0IG5vdGUgPSBsaW5rLm5vdGUudHJpbSgpO1xuXG5cdFx0XHRpZiAobm90ZS5sZW5ndGggPT0gMClcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XG5cdFx0XHRub3RlID0gdGhpcy5jbGVhbk5vdGUobGluaywgbm90ZSk7XG5cblx0XHRcdC8vIHJlbW92ZSAnS2FtIGRcdTAwRTFsJyBwYXJ0XG5cdFx0XHRpZiAobm90ZS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmxpc3RPZkxpbmtzS2V5d29yZCkpIHtcblx0XHRcdFx0bGV0IFtpbXBvcnRhbnRQYXJ0LCBlbmRQYXJ0XSA9IG5vdGUuc3BsaXQodGhpcy5zZXR0aW5ncy5saXN0T2ZMaW5rc0tleXdvcmQpO1xuXHRcdFx0XHRub3RlID0gaW1wb3J0YW50UGFydC50cmltKCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IHRpdGxlID0gdGhpcy50cmFuc2Zvcm1UaXRsZShsaW5rKTtcblxuXHRcdFx0bm90ZSA9IGAke3RpdGxlfVxcbiR7bm90ZX1gO1xuXG5cdFx0XHRpZiAoIWxpbmsuaW5saW5lKVxuXHRcdFx0XHR0aGlzLm1hcmtkb3duICs9IGBcXG4ke25vdGV9XFxuYDtcblxuXHRcdFx0dGhpcy5tYXJrZG93biA9IHRoaXMubWFya2Rvd24ucmVwbGFjZShgW1ske2xpbmsubmFtZX1dXWAsIGBbWyMke2xpbmsubmFtZX1dXWApO1xuXG5cdFx0XHRpZiAoJ2NoaWxkcmVuJyBpbiBsaW5rKVxuXHRcdFx0XHR0aGlzLmNvbXBvc2VNYXJrZG93bihsaW5rLmNoaWxkcmVuKTtcblx0XHR9KTtcblx0fVxuXG5cdGNsZWFuTm90ZShsaW5rOiBMaW5rVHJlZVR5cGUsIG5vdGU6IHN0cmluZykge1xuXHRcdC8vIHJlbW92ZSB0aXRsZSBvbiBhIGZpcnN0IGxpbmVcblx0XHRsZXQgbm90ZVJvd3MgPSBub3RlLnNwbGl0KCdcXG4nKTtcblx0XHRsZXQgZmlyc3RSb3cgPSBmaXhTcGFjZUluTmFtZShub3RlUm93c1swXSk7XG5cdFx0aWYgKGZpcnN0Um93LmluY2x1ZGVzKGAjICR7bGluay5uYW1lfWApKSB7XG5cdFx0XHRub3RlUm93cy5zaGlmdCgpO1xuXHRcdFx0bm90ZSA9IG5vdGVSb3dzLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuXHRcdH1cblx0XHRcblx0XHQvLyByZW1vdmUgc3RhdHVzIHRhZyAoI2Rva29uY2VuZSwgI3JvenByYWNvdmFuZSlcblx0XHRub3RlID0gbm90ZS5yZXBsYWNlKC8jW1xcd1xcc10rXFxuL2csIFwiXCIpO1xuXG5cdFx0cmV0dXJuIG5vdGU7XG5cdH1cblxuXHR0cmFuc2Zvcm1UaXRsZShsaW5rOiBMaW5rVHJlZVR5cGUpIHtcblx0XHRsZXQgdGl0bGUgPSBcIlwiO1xuXHRcdGlmIChsaW5rLmlubGluZSkge1xuXHRcdFx0Ly8gaDVcblx0XHRcdHRpdGxlID0gYCMjIyMjICR7bGluay5uYW1lfWA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIG5lc3RlZCB0aXRsZSBlLmcuIGgzIC0+ICMjIyB0aXRsZTNcblx0XHRcdGNvbnN0IG5lc3RlZExldmVsID0gQXJyYXkobGluay5sZXZlbCkuZmlsbCgnIycpLmpvaW4oJycpO1xuXHRcdFx0dGl0bGUgPSBgJHtuZXN0ZWRMZXZlbH0gJHtsaW5rLm5hbWV9YDtcblx0XHR9XG5cdFx0cmV0dXJuIHRpdGxlO1xuXHR9XG5cblx0YXN5bmMgZ2VuZXJhdGVOb3Rlc0hpZXJhcmNoeShsaW5rczogTGlua1RyZWVUeXBlW10pIHtcblx0XHRjb25zdCBsaW5rc09iajogQnVpbGRMaW5rVHJlZVR5cGUgPSBhd2FpdCB0aGlzLmNyZWF0ZVBhcmVudFN0cnVjdHVyZShsaW5rcywgMCwgW10pO1xuXHRcdGxldCBsaW5rc0FycjogTGlua1RyZWVUeXBlW10gPSBbXTtcblx0XHRcblx0XHRPYmplY3Qua2V5cyhsaW5rc09iaikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdFx0Y29uc3Qge3BhcmVudFJlZiwgLi4ucmVzdH0gPSBsaW5rc09ialtrZXkgYXMga2V5b2YgQnVpbGRMaW5rVHJlZVR5cGVdIGFzIEJ1aWxkTGlua1RyZWVUeXBlOyBcblx0XHRcdGxpbmtzQXJyLnB1c2goey4uLnJlc3QsIHBhcmVudDogKGxpbmtzT2JqW2tleSBhcyBrZXlvZiBCdWlsZExpbmtUcmVlVHlwZV0gYXMgQnVpbGRMaW5rVHJlZVR5cGUpPy5wYXJlbnRSZWY/Lm5hbWV9KTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1aWxkQ2hpbGRyZW5Gcm9tUGFyZW50cyA9IChhcnI6IExpbmtUcmVlVHlwZVtdLCBwYXJlbnQ6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuXHRcdFx0bGV0IGNoaWxkcmVuID0gW107XG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKGFycltpXS5wYXJlbnQgPT0gcGFyZW50KSB7XG5cdFx0XHRcdFx0Y29uc3QgZ3JhbmRDaGlsZHJlbiA9IGJ1aWxkQ2hpbGRyZW5Gcm9tUGFyZW50cyhhcnIsIGFycltpXS5uYW1lKTtcblx0XHRcdFx0XHRpZihncmFuZENoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0YXJyW2ldLmNoaWxkcmVuID0gZ3JhbmRDaGlsZHJlbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2hpbGRyZW4ucHVzaChhcnJbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY2hpbGRyZW47XG5cdFx0fVxuXHRcdHJldHVybiBidWlsZENoaWxkcmVuRnJvbVBhcmVudHMobGlua3NBcnIsIHVuZGVmaW5lZCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVQYXJlbnRTdHJ1Y3R1cmUobGlua3M6IEJ1aWxkTGlua1RyZWVUeXBlW10sIGxldmVsOiBudW1iZXIsIHByb2Nlc3NlZDogc3RyaW5nW10sIHBhcmVudFJlZj86IG9iamVjdCwgdGl0bGVNYXBwaW5nPzogb2JqZWN0KSB7XG5cdFx0dGl0bGVNYXBwaW5nID0gKHRpdGxlTWFwcGluZyBhcyBCdWlsZExpbmtUcmVlVHlwZSkgPz8ge307IFxuXG5cdFx0Zm9yIGF3YWl0IChjb25zdCBbb3JkZXIsIGxpbmtdIG9mIGxpbmtzLmVudHJpZXMoKSkge1xuXG5cdFx0XHQvLyBza2lwIGxpbmsgZnJvbSBtYWluQ29udGVudFxuXHRcdFx0aWYgKHRoaXMubWFpbk5hbWVMaW5rcy5pbmNsdWRlcyhsaW5rLm5hbWUpICYmIGxldmVsICE9IDApXG5cdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHQvLyBza2lwIGlmIGxpbmsgaXMgYWxyZWFkeSBwcm9jZXNzZWRcblx0XHRcdGlmIChwcm9jZXNzZWQuaW5jbHVkZXMobGluay5uYW1lKSlcblx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdHByb2Nlc3NlZC5wdXNoKGxpbmsubmFtZSk7XG5cblx0XHRcdGxldCBub3RlID0gYXdhaXQgZ2V0Tm90ZUJ5TmFtZSh0aGlzLmFwcCwgbGluay5wYXRoKVxuXHRcdFx0Y29uc3Qgc3ViTGlua3MgPSB0aGlzLnBhcnNlTGlua3Mobm90ZSk7XG5cdFx0XG5cdFx0XHR0aGlzLm1heExldmVsID0gbGV2ZWwgKyAxO1xuXG5cdFx0XHRpZiAobm90ZS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmxpc3RPZkxpbmtzS2V5d29yZCkpIHtcblx0XHRcdFx0bGV0IFtpbXBvcnRhbnRQYXJ0LCBlbmRQYXJ0XSA9IG5vdGUuc3BsaXQodGhpcy5zZXR0aW5ncy5saXN0T2ZMaW5rc0tleXdvcmQpO1xuXHRcdFx0XHRub3RlID0gaW1wb3J0YW50UGFydC50cmltKCk7XG5cdFx0XHR9XG5cblx0XHRcdCh0aXRsZU1hcHBpbmcgYXMgYW55KVtsaW5rLm5hbWVdID0geyAuLi5saW5rLCBwYXJlbnRSZWYsIGxldmVsOiB0aGlzLm1heExldmVsLCBvcmRlciwgbm90ZX07XG5cblx0XHRcdGlmIChsaW5rcy5sZW5ndGggPiAwKVxuXHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhcmVudFN0cnVjdHVyZShzdWJMaW5rcywgdGhpcy5tYXhMZXZlbCwgcHJvY2Vzc2VkLCAodGl0bGVNYXBwaW5nIGFzIGFueSlbbGluay5uYW1lXSwgdGl0bGVNYXBwaW5nKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGl0bGVNYXBwaW5nIGFzIEJ1aWxkTGlua1RyZWVUeXBlO1xuXHR9XG5cblx0bWFrZUNvbnRlbnRQcmV2aWV3TUQobGlua3M6IExpbmtUcmVlVHlwZVtdLCBwcmV2aWV3Q29udGVudDogc3RyaW5nID0gXCJcIikge1xuXHRcdGxpbmtzLmZvckVhY2goKGxpbms6IExpbmtUcmVlVHlwZSkgPT4ge1xuXHRcdFx0aWYgKGxpbmsuZXhpc3RzICYmIGxpbmsubGV2ZWwpIHtcblx0XHRcdFx0aWYgKHRoaXMuaWdub3JlZExpbmtzLmluY2x1ZGVzKGxpbmsubmFtZSkpXG5cdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdGNvbnN0IHRhYnMgPSBBcnJheShsaW5rLmxldmVsIC0gMSkuZmlsbCgnXFx0Jykuam9pbignJyk7XG5cblx0XHRcdFx0cHJldmlld0NvbnRlbnQgKz0gYCR7dGFic30tIFtbIyR7bGluay5uYW1lfV1dXFxuYDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCdjaGlsZHJlbicgaW4gbGluaylcblx0XHRcdFx0cHJldmlld0NvbnRlbnQgKz0gdGhpcy5tYWtlQ29udGVudFByZXZpZXdNRChsaW5rLmNoaWxkcmVuKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcmV2aWV3Q29udGVudDtcblx0fVxuXG5cdGluc2VydFRvTmVhcmVzdE5ld0xpbmUobm90ZTogc3RyaW5nLCBsaW5rczogTGlua1RyZWVUeXBlW10pIHtcblx0XHQvLyBmaW5kIGNvbW1vbiBsaW5lXG5cdFx0Ly8gY3JlYXRlIGFycmF5IGF0IHRoYXQgbGluZVxuXHRcdC8vIGlmIG5ldyBjb21tb24gY29tZXMsIHB1c2ggaXQgdG9cblx0XHQvLyBhdCB0aGUgZW5kIG1ha2UgaXQgc2ltcGxlIHN0cmluZ1xuXG5cdFx0bGV0IHNwZWNpYWxBcnI6IChzdHJpbmd8W10pW10gPSBbXTtcblx0XG5cdFx0Y29uc3Qgcm93cyA9IG5vdGUuc3BsaXQoXCJcXG5cIik7XG5cdFx0Y29uc3QgZW1wdHlMaW5lczogbnVtYmVyW10gPSBbXTtcblx0XHRyb3dzLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHtcblx0XHRcdGlmIChyb3cgPT0gXCJcIikgeyBcblx0XHRcdFx0c3BlY2lhbEFyci5wdXNoKFtdKTtcblx0XHRcdFx0ZW1wdHlMaW5lcy5wdXNoKGluZGV4KTtcblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRzcGVjaWFsQXJyLnB1c2gocm93KTtcblx0XHR9KVxuXHRcdHNwZWNpYWxBcnIucHVzaChbXSk7XG5cdFx0ZW1wdHlMaW5lcy5wdXNoKHNwZWNpYWxBcnIubGVuZ3RoLTEpXG5cblx0XHRsaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xuXHRcdFx0Y29uc3QgaW5kZXggPSBzcGVjaWFsQXJyLmZpbmRJbmRleChyb3cgPT4gdHlwZW9mIHJvdyA9PT0gJ3N0cmluZycgJiYgcm93LmluY2x1ZGVzKGBbWyR7bGluay5uYW1lfV1dYCkpXG5cdFx0XG5cdFx0XHQvL29ubHkgY29uc2lkZXIgbnVtYmVycyBoaWdoZXIgdGhhbiB0aGUgdGFyZ2V0XG5cdFx0XHRjb25zdCBmaW5kQ2xvc2VzdEhpZ2hlciA9IGVtcHR5TGluZXMuZmlsdGVyKGNhbmRpZGF0ZSA9PiBjYW5kaWRhdGUgPiBpbmRleClbMF07XG5cblx0XHRcdGNvbnN0IHRpdGxlID0gdGhpcy50cmFuc2Zvcm1UaXRsZShsaW5rKTtcblxuXHRcdFx0Ly8gdHJpbSBlbnRlcnMgYW5kIHNwYWNlc1xuXHRcdFx0bGV0IG5vdGUgPSBsaW5rLm5vdGUudHJpbSgpO1xuXG5cdFx0XHRpZiAobm90ZS5sZW5ndGggPT0gMClcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRpZiAodGhpcy5pZ25vcmVkTGlua3MuaW5jbHVkZXMobGluay5uYW1lKSlcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRub3RlID0gdGhpcy5jbGVhbk5vdGUobGluaywgbm90ZSk7XG5cblx0XHRcdChzcGVjaWFsQXJyW2ZpbmRDbG9zZXN0SGlnaGVyXSBhcyBBcnJheTxzdHJpbmc+KS5wdXNoKCdcXG4nLCB0aXRsZSwgbm90ZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBmbGF0dGVuIGFuZCBqb2luIHRvIHN0cmluZ1xuXHRcdHJldHVybiBzcGVjaWFsQXJyXG5cdFx0XHQubWFwKHJvdyA9PiB0eXBlb2Ygcm93ID09PSAnc3RyaW5nJyA/IHJvdyA6IHJvdy5qb2luKFwiXFxuXCIpKVxuXHRcdFx0LmpvaW4oXCJcXG5cIik7XG5cdH1cblxuXHRhc3luYyBvbkNsb3NlKCkge1xuXHRcdC8vIE5vdGhpbmcgdG8gY2xlYW4gdXAuXG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpIHtcblx0XHRyZXR1cm4gVklFV19DT05URU5UX0NPTVBPU0VfTk9URVM7XG5cdH1cblxuXHRnZXREaXNwbGF5VGV4dCgpIHtcblx0XHRyZXR1cm4gXCJOb3RlcyBNZXJnZXJcIjtcblx0fVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjb25zdCBmaXhTcGFjZUluTmFtZSA9IChuYW1lOiBzdHJpbmcpID0+IHtcblx0cmV0dXJuIG5hbWUucmVwbGFjZSgvW1xcdTAwQTBcXHUxNjgwXFx1MTgwRVxcdTIwMDAtXFx1MjAwQlxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdUZFRkZdLywgXCIgXCIpLnRyaW0oKTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldE5vdGVCeU5hbWUgPSBhc3luYyAoYXBwOiBBcHAsIHBhdGg6IHN0cmluZykgPT4ge1xuXHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcblxuXHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKVxuXHRcdHJldHVybiBcIlwiO1x0XG5cblx0cmV0dXJuIGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xufVxuIiwgImltcG9ydCB7IFNsaWRlVHlwZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXNNYXJrZG93biB7XHJcblxyXG5cdHNsaWRlczogU2xpZGVUeXBlW10gPSBbXTtcclxuXHRzbGlkZXNob3c6IHN0cmluZyA9IFwiXCI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNsaWRlczogU2xpZGVUeXBlW10sIHRpdGxlOiBzdHJpbmcsIGhhc1RpdGxlU2xpZGU6IGJvb2xlYW4sIGhhc0xhc3RTbGlkZTogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5zbGlkZXMgPSBzbGlkZXM7XHJcblxyXG5cdFx0dGhpcy5zbGlkZXNob3cgKz0gdGhpcy5jcmVhdGVQcm9wZXJ0aWVzKCk7XHJcblxyXG5cdFx0aWYgKGhhc1RpdGxlU2xpZGUpXHJcblx0XHRcdHRoaXMuc2xpZGVzaG93ICs9IHRoaXMuY3JlYXRlVGl0bGVTbGlkZSh0aXRsZSk7XHJcblx0XHRcclxuXHRcdHNsaWRlcy5mb3JFYWNoKChzbGlkZTogU2xpZGVUeXBlKSA9PiB7XHJcblx0XHRcdGlmIChzbGlkZS50eXBlID09PSAnYmFzaWMnKVxyXG5cdFx0XHRcdHRoaXMuc2xpZGVzaG93ICs9IHRoaXMuY3JlYXRlQmFzaWNTbGlkZShzbGlkZS5saW5rLm5hbWUpO1xyXG5cdFx0XHRlbHNlIGlmIChzbGlkZS50eXBlID09PSAnc3BsaXQnKVxyXG5cdFx0XHRcdHRoaXMuc2xpZGVzaG93ICs9IHRoaXMuY3JlYXRlU3BsaXRTbGlkZShzbGlkZS5saW5rLm5hbWUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKGhhc0xhc3RTbGlkZSlcclxuXHRcdFx0dGhpcy5zbGlkZXNob3cgKz0gdGhpcy5jcmVhdGVMYXN0U2xpZGUoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdGNyZWF0ZVByb3BlcnRpZXMoKSB7XHJcblx0XHRyZXR1cm4gYC0tLVxcbmAgKyBcclxuXHRcdFx0XHRgdGhlbWU6IGNvbnN1bHRcXG5gICsgXHJcblx0XHRcdFx0YGhlaWdodDogNTQwXFxuYCArIFxyXG5cdFx0XHRcdGBtYXJnaW46IDBcXG5gICtcclxuXHRcdFx0XHRgbWF4U2NhbGU6IDRcXG5gICsgXHJcblx0XHRcdFx0YC0tLVxcblxcbmA7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVUaXRsZVNsaWRlKHRpdGxlOiBzdHJpbmcpIHtcclxuXHRcdHJldHVybiBgXFxuPCEtLSBzbGlkZSB0ZW1wbGF0ZT1cIltbdHBsLWNvbi10aXRsZV1dXCIgLS0+XFxuXFxuYCArXHJcblx0XHRcdFx0YCMjICR7dGl0bGV9XFxuYCArIFxyXG5cdFx0XHRcdGA6OjogYmxvY2tcXG5gICsgXHJcblx0XHRcdFx0YCMjIyMgYWRkIGF1dGhvciBoZXJlXFxuYCArXHJcblx0XHRcdFx0YDo6OlxcblxcbmA7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVMYXN0U2xpZGUoKSB7XHJcblx0XHRyZXR1cm4gYFxcbi0tLVxcbmAgK1xyXG5cdFx0XHRgPCEtLSBzbGlkZSB0ZW1wbGF0ZT1cIltbdHBsLWNvbi1zcGxhc2hdXVwiIC0tPlxcblxcbmAgK1xyXG5cdFx0XHRgIyAqKlRoYW5rIHlvdSBmb3IgeW91ciBhdHRlbnRpb24qKlxcblxcbmA7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVCYXNpY1NsaWRlKG5hbWU6IHN0cmluZykge1xyXG5cdFx0cmV0dXJuIGBcXG4tLS1cXG5gICsgXHJcblx0XHRcdGA8IS0tIHNsaWRlIHRlbXBsYXRlPVwiW1t0cGwtY29uLWRlZmF1bHQtYm94XV1cIiAtLT5cXG5cXG5gICtcclxuXHRcdFx0YDo6OiB0aXRsZVxcbmAgK1xyXG5cdFx0XHRgIyMjIF8qKiR7bmFtZX0qKl9cXG5gICtcclxuXHRcdFx0YDo6OlxcblxcbmAgK1xyXG5cdFx0XHRgOjo6IGJsb2NrXFxuYCArIFxyXG5cdFx0XHRgLVxcbmAgKyBcclxuXHRcdFx0YC1cXG5gICtcclxuXHRcdFx0YC1cXG5gICtcclxuXHRcdFx0YDo6OlxcblxcbmA7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVTcGxpdFNsaWRlKG5hbWU6IHN0cmluZykge1xyXG5cdFx0cmV0dXJuIGBcXG4tLS1cXG5gICsgXHJcblx0XHRcdGA8IS0tIHNsaWRlIHRlbXBsYXRlPVwiW1t0cGwtY29uLTItMS1ib3hdXVwiIC0tPlxcblxcbmAgK1xyXG5cdFx0XHRgOjo6IHRpdGxlXFxuYCArIFxyXG5cdFx0XHRgIyMjIF8qKiR7bmFtZX0qKl9cXG5gICtcclxuXHRcdFx0YDo6OlxcblxcbmAgKyBcclxuXHRcdFx0YDo6OiBsZWZ0XFxuYCArIFxyXG5cdFx0XHRgKip0ZXh0IGluIGxlZnQgYm94KipcXG5gICsgXHJcblx0XHRcdGAtIGxvcmVtIGlwc3VtXFxuYCArXHJcblx0XHRcdGAtXFxuYCArIFxyXG5cdFx0XHRgLVxcbmAgK1xyXG5cdFx0XHRgOjo6XFxuXFxuYCArXHJcblx0XHRcdGA6OjogcmlnaHRcXG5gICtcclxuXHRcdFx0YCoqdGV4dCBpbiByaWdodCBib3gqKlxcbmAgKyBcclxuXHRcdFx0YC0gbG9yZW0gaXBzdW1cXG5gICsgXHJcblx0XHRcdGAtXFxuYCArICBcclxuXHRcdFx0YC1cXG5gICtcclxuXHRcdFx0YDo6OlxcblxcbmA7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgQnV0dG9uIHtcclxuXHRidG46IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50LCB0ZXh0OiBzdHJpbmcsIG9uQ2xpY2s6IChjb250ZXh0OiBCdXR0b24pID0+IHZvaWQsIGFyZ3M/OiBvYmplY3QpIHtcclxuXHRcdHRoaXMuYnRuID0gZWxlbWVudC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0LCAuLi5hcmdzIH0pO1xyXG5cdFx0dGhpcy5idG4ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0b25DbGljayh0aGlzKTtcclxuXHRcdH07XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IExpbmtUcmVlVHlwZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlTGluayB7XHJcblx0Y29udGV4dDogQXBwO1xyXG5cdGVsZW1lbnQ6IEVsZW1lbnQ7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb250ZXh0OiBBcHAsIGVsZW1lbnQ6IEVsZW1lbnQsIG5hbWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xyXG5cclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoKSB7XHJcblx0XHRjb25zdCBocmVmVGl0bGUgPSB0aGlzLmVsZW1lbnQuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6IHRoaXMubmFtZSwgY2xzOiAnY29udF9fdGl0bGUnIH0pO1xyXG5cdFx0aHJlZlRpdGxlLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY29udGV4dC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRoaXMubmFtZSwgXCJcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuLy8gTGluayB3aXRoIGlubmVyIHN0YXRlIGFuZCBoZWxwZXIgZm5jc1xyXG5leHBvcnQgY2xhc3MgTGluayB7XHJcblxyXG5cdGNvbnRleHQ6IEFwcDtcclxuXHRhOiBIVE1MRWxlbWVudDtcclxuXHRsaW5rOiBMaW5rVHJlZVR5cGU7XHJcblx0ZWxlbWVudDogRWxlbWVudDtcclxuXHR0b2dnbGVkU3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Y29uc3RydWN0b3IoY29udGV4dDogQXBwLCBlbGVtZW50OiBFbGVtZW50LCBsaW5rOiBMaW5rVHJlZVR5cGUsIHJlbmRlck5vdzogYm9vbGVhbiA9IHRydWUpIHtcclxuXHRcdHRoaXMubGluayA9IGxpbms7XHJcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHJcblx0XHRpZiAocmVuZGVyTm93KVxyXG5cdFx0XHR0aGlzLnJlbmRlcihmYWxzZSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoc3RhdGU6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuYSA9IHRoaXMuZWxlbWVudC5jcmVhdGVFbCgnYScsIHsgdGV4dDogdGhpcy5saW5rLm5hbWUsIGNsczogXCJsaW5rXCIgfSk7XHJcblx0XHQhdGhpcy5saW5rLmV4aXN0cyAmJiB0aGlzLmEuYWRkQ2xhc3MoXCJjb250X19saW5rLW5vdC1leGlzdFwiKTtcclxuXHRcdHRoaXMubGluay5pbmxpbmUgJiYgdGhpcy5hLmFkZENsYXNzKFwiaW5saW5lXCIpO1xyXG5cdFx0dGhpcy5hLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY29udGV4dC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRoaXMubGluay5uYW1lLCBcIlwiKTtcclxuXHRcdFx0IXRoaXMubGluay5leGlzdHMgJiYgdGhpcy5hLnJlbW92ZUNsYXNzKFwiY29udF9fbGluay1ub3QtZXhpc3RcIik7XHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMudG9nZ2xlKHN0YXRlKTtcclxuXHR9XHJcblxyXG5cdHRvZ2dsZShzdGF0ZTogYm9vbGVhbikge1xyXG5cdFx0aWYgKHN0YXRlKVxyXG5cdFx0XHR0aGlzLmEucmVtb3ZlQ2xhc3MoJ3N0cmlrZXRocm91Z2gnKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGhpcy5hLmFkZENsYXNzKCdzdHJpa2V0aHJvdWdoJyk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBTYXZlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIG5hbWU6IHN0cmluZztcbiAgZm9sZGVyOiBzdHJpbmc7XG4gIG9uU3VibWl0OiAoZmlsZVBhdGg6IHN0cmluZykgPT4gdm9pZDtcbiAgaXNEaXNhYmxlZDogYm9vbGVhbiA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU3VibWl0OiAoZmlsZVBhdGg6IHN0cmluZykgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgZ2V0Rm9sZGVycygpIHtcblx0Y29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiBmaWxlIGluc3RhbmNlb2YgVEZvbGRlcik7XG5cdHJldHVybiBmb2xkZXJzLnJlZHVjZSgob2JqOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBpdGVtOiBUQWJzdHJhY3RGaWxlKSA9PiAob2JqW2l0ZW0ucGF0aF0gPSBpdGVtLnBhdGgsIG9iaiksIHt9KTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJTYXZlIGFzXCIgfSk7XG5cblx0Y29uc3QgZm9sZGVycyA9IHRoaXMuZ2V0Rm9sZGVycygpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoXCJGaWxlIG5hbWU6IFwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWVcbiAgICAgICAgfSkpO1xuXG5cdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKFwiU2VsZWN0IGZvbGRlcjogXCIpXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuICAgICAgICBkcm9wZG93blxuXHRcdFx0LmFkZE9wdGlvbnMoZm9sZGVycylcblx0XHRcdC5vbkNoYW5nZSgodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHR0aGlzLmZvbGRlciA9IHZhbHVlO1xuXHRcdFx0fSlcblx0ICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICBidG5cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkdlbmVyYXRlIG5vdGVcIilcbiAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG5cdFx0XHR0aGlzLmZvbGRlciA9IHRoaXMuZm9sZGVyID8/IHRoaXMuYXBwLnZhdWx0LmdldFJvb3QoKS5wYXRoO1xuXHRcdFx0dGhpcy5vblN1Ym1pdChub3JtYWxpemVQYXRoKGAke3RoaXMuZm9sZGVyfS8ke3RoaXMubmFtZX0ubWRgKSk7XG4gICAgICAgICAgfSkpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IExpbmtUcmVlVHlwZSB9IGZyb20gJ3NyYy90eXBlcyc7XHJcbmltcG9ydCB7XHJcblx0TGluaywgQ2hlY2tib3hcclxufSBmcm9tICcuL2luZGV4JztcclxuXHJcblxyXG5mdW5jdGlvbiBmbGF0dGVuQ2hpbGRyZW4obGluazogTGlua1RyZWVUeXBlLCBjaGlsZHJlbjogc3RyaW5nW10pIHtcclxuXHRpZiAoJ2NoaWxkcmVuJyBpbiBsaW5rKSB7XHJcblx0XHRjb25zdCBjaGlsZHJlbkxpbmtOYW1lcyA9IGxpbmsuY2hpbGRyZW4ubWFwKChsOiBMaW5rVHJlZVR5cGUpID0+IGwubmFtZSk7IFxyXG5cdFx0Y2hpbGRyZW4ucHVzaCguLi5jaGlsZHJlbkxpbmtOYW1lcyk7XHJcblx0XHRsaW5rLmNoaWxkcmVuLmZvckVhY2goKGw6IExpbmtUcmVlVHlwZSkgPT4ge1xyXG5cdFx0XHRmbGF0dGVuQ2hpbGRyZW4obCwgY2hpbGRyZW4pO1xyXG5cdFx0fSlcclxuXHR9XHJcblx0cmV0dXJuIGNoaWxkcmVuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJlZU1lbnUge1xyXG5cdGFwcDogQXBwO1xyXG5cdFVMOiBFbGVtZW50O1xyXG5cclxuXHRpZ25vcmVkTGlua3M6IHN0cmluZ1tdID0gW107XHJcblx0bGlua3NUcmVlOiBMaW5rVHJlZVR5cGVbXSA9IFtdO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc3RydWN0dXJlOiBFbGVtZW50LCBsaW5rc1RyZWU6IExpbmtUcmVlVHlwZVtdLCBldmVudDogKGlnbm9yZWRMaW5rczogc3RyaW5nW10pID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0bGV0IG1lbnUgPSBzdHJ1Y3R1cmUuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndHJlZS1tZW51J30pO1xyXG5cdFx0dGhpcy5VTCA9IG1lbnUuY3JlYXRlRWwoJ3VsJyk7XHJcblx0XHR0aGlzLmxpbmtzVHJlZSA9IGxpbmtzVHJlZTtcclxuXHJcblx0XHR0aGlzLnJlbmRlcih0aGlzLmxpbmtzVHJlZSwgdGhpcy5VTCwgW10sIGV2ZW50KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihsaW5rczogTGlua1RyZWVUeXBlW10sIG1lbnVFbDogRWxlbWVudCwgY2hpbGRyZW5MaW5rczogc3RyaW5nW10sIGV2ZW50OiAobGlua3M6IHN0cmluZ1tdKSA9PiB2b2lkKSB7XHJcblx0XHRpZiAoIWNoaWxkcmVuTGlua3MpIFxyXG5cdFx0XHRjaGlsZHJlbkxpbmtzID0gW107XHJcblxyXG5cdFx0bGlua3MuZm9yRWFjaCgobGluazogTGlua1RyZWVUeXBlKSA9PiB7XHJcblx0XHRcdGNvbnN0IGxpID0gbWVudUVsLmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRjb25zdCBsaW5rRWwgPSBuZXcgTGluayh0aGlzLmFwcCwgbGksIGxpbmssIGZhbHNlKTtcclxuXHJcblx0XHRcdGxldCBzdGF0ZTogYm9vbGVhbiA9ICFjaGlsZHJlbkxpbmtzLmluY2x1ZGVzKGxpbmtFbC5saW5rLm5hbWUpO1xyXG5cclxuXHRcdFx0aWYgKCFsaW5rLmV4aXN0cylcclxuXHRcdFx0XHRzdGF0ZSA9IGZhbHNlOyBcclxuXHJcblx0XHRcdG5ldyBDaGVja2JveChsaSwgc3RhdGUsIGxpbmsuZXhpc3RzLCAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaWdub3JlZENoaWxkcmVuID0gW2xpbmtFbC5saW5rLm5hbWUsIC4uLmZsYXR0ZW5DaGlsZHJlbihsaW5rRWwubGluaywgW10pXTtcclxuXHJcblx0XHRcdFx0aWYgKHN0YXRlID09IGZhbHNlKSB7IFxyXG5cdFx0XHRcdFx0Ly8gcmVtb3ZlIGNoaWxkcmVuIGZyb20gY2hpbGRyZW5MaW5rc1xyXG5cdFx0XHRcdFx0Y2hpbGRyZW5MaW5rcyA9IGNoaWxkcmVuTGlua3MuZmlsdGVyKChjbDogc3RyaW5nKSA9PiAhaWdub3JlZENoaWxkcmVuLmluY2x1ZGVzKGNsKSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNoaWxkcmVuTGlua3MucHVzaCguLi5pZ25vcmVkQ2hpbGRyZW4pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyByZW1vdmUgZHVwZXNcclxuXHRcdFx0XHRcdGNoaWxkcmVuTGlua3MgPSBbLi4ubmV3IFNldChjaGlsZHJlbkxpbmtzKV1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuaWdub3JlZExpbmtzID0gY2hpbGRyZW5MaW5rcztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBjbGVhbnVwIGFuZCByZXJlbmRlclxyXG5cdFx0XHRcdHRoaXMuVUwuZW1wdHkoKVxyXG5cdFx0XHRcdHRoaXMucmVuZGVyKHRoaXMubGlua3NUcmVlLCB0aGlzLlVMLCBjaGlsZHJlbkxpbmtzLCBldmVudCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bGlua0VsLnJlbmRlcihzdGF0ZSk7XHJcblxyXG5cdFx0XHRpZiAoJ2NoaWxkcmVuJyBpbiBsaW5rKSB7XHJcblx0XHRcdFx0Y29uc3QgdWwgPSBsaS5jcmVhdGVFbCgndWwnKTtcclxuXHRcdFx0XHR0aGlzLnJlbmRlcihsaW5rLmNoaWxkcmVuLCB1bCwgY2hpbGRyZW5MaW5rcywgZXZlbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gZXZlbnQodGhpcy5pZ25vcmVkTGlua3MpO1xyXG5cdH1cclxufVxyXG4iLCAiZXhwb3J0IGNsYXNzIENoZWNrYm94IHtcclxuXHJcblx0Y2I6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudDogRWxlbWVudCwgc3RhdGU6IGJvb2xlYW4sIGV4aXN0czogYm9vbGVhbiwgb25DbGljazogKGNvbnRleHQ6IENoZWNrYm94KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmNiID0gZWxlbWVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcclxuXHRcdFx0dHlwZTogJ2NoZWNrYm94JyxcclxuXHRcdFx0Y2xzOiAnY2hlY2tib3gtYnRuJ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jYi5jaGVja2VkID0gc3RhdGU7XHJcblxyXG5cdFx0aWYgKCFleGlzdHMpIHtcclxuXHRcdFx0dGhpcy5jYi5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdHRoaXMuY2IuY2hlY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmNiLmFkZENsYXNzKCdjaGVja2JveC1idG4tZGlzYWJsZWQnKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuY2Iub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0b25DbGljayh0aGlzKTtcclxuXHRcdH07XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIERyb3Bkb3duQ29tcG9uZW50LCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBMaW5rVHJlZVR5cGUsIFNsaWRlVHlwZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcclxuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICBvblN1Ym1pdDogKHNsaWRlczogU2xpZGVUeXBlW10sIHRpdGxlU2xpZGU6IGJvb2xlYW4sIGxhc3RTbGlkZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICBsaW5rc0VsOiBFbGVtZW50O1xyXG4gIGxpbmtzOiBMaW5rVHJlZVR5cGVbXTtcclxuICBmbGF0dGVuZWRMaW5rczogTGlua1RyZWVUeXBlW10gPSBbXTtcclxuICBzbGlkZXM6IFNsaWRlVHlwZVtdO1xyXG4gIGlnbm9yZWRMaW5rczogc3RyaW5nW107XHJcbiAgZGVwdGg6IG51bWJlcjtcclxuICBtYXhEZXB0aCA9IDE7XHJcbiAgdGl0bGVTbGlkZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGxhc3RTbGlkZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbGlua3M6IExpbmtUcmVlVHlwZVtdLCBpZ25vcmVkTGlua3M6IHN0cmluZ1tdLCBvblN1Ym1pdDogKHNsaWRlczogU2xpZGVUeXBlW10sIHRpdGxlU2xpZGU6IGJvb2xlYW4sIGxhc3RTbGlkZTogYm9vbGVhbikgPT4gdm9pZCkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuXHR0aGlzLmxpbmtzID0gbGlua3M7XHJcblx0dGhpcy5pZ25vcmVkTGlua3MgPSBpZ25vcmVkTGlua3M7XHJcbiAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBvbk9wZW4oKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0Y29udGVudEVsLmVtcHR5KCk7XHJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiU2xpZGVzaG93XCIgfSk7XHJcblxyXG5cdHRoaXMuZmxhdHRlbkxpbmtzKHRoaXMubGlua3MpO1xyXG5cclxuXHRjb25zdCBzZXR0aW5nc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcclxuXHJcblx0Y29uc3QgZGVwdGhTdHIgPSAoZGVwdGg6IG51bWJlcikgPT4gYFNsaWRlcyBkZXB0aDogJHtkZXB0aH1gO1xyXG5cclxuXHR0aGlzLmRlcHRoID0gdGhpcy5tYXhEZXB0aDtcclxuXHJcblx0Y29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdJbmNsdWRlOiAnfSlcclxuXHJcblx0Y29uc3QgdGl0bGVTbGlkZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcclxuXHRuZXcgQ2hlY2tib3godGl0bGVTbGlkZUVsLCB0aGlzLnRpdGxlU2xpZGUsIHRydWUsICgpID0+IHtcclxuXHRcdHRoaXMudGl0bGVTbGlkZSA9ICF0aGlzLnRpdGxlU2xpZGU7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH0pXHJcblx0dGl0bGVTbGlkZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAndGl0bGUgc2xpZGUnfSlcclxuXHJcblx0Y29uc3QgbGFzdFNsaWRlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xyXG5cdG5ldyBDaGVja2JveChsYXN0U2xpZGVFbCwgdGhpcy5sYXN0U2xpZGUsIHRydWUsICgpID0+IHtcclxuXHRcdHRoaXMubGFzdFNsaWRlID0gIXRoaXMubGFzdFNsaWRlO1xyXG5cdFx0dGhpcy5yZW5kZXIoKTtcclxuXHR9KVxyXG5cdGxhc3RTbGlkZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnbGFzdCBzbGlkZSd9KVxyXG5cdFxyXG5cdHRoaXMubGlua3NFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NFbClcclxuXHRcdC5zZXROYW1lKGRlcHRoU3RyKHRoaXMubWF4RGVwdGgpKVxyXG5cdFx0LnNldERlc2MoJ1NldCBkZXB0aCBvZiBwcmV2aWV3IGNvbnRlbnQgdG8gY3JlYXRlIHNsaWRlcyBmcm9tLicpXHJcblx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuXHRcdFx0LnNldFZhbHVlKHRoaXMubWF4RGVwdGgpXHJcblx0XHRcdC5zZXRMaW1pdHMoMSwgdGhpcy5tYXhEZXB0aCwgMSlcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGRlcHRoRWwgPSBzZXR0aW5nc0VsLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xyXG5cdFx0XHRcdGRlcHRoRWwuZW1wdHkoKVxyXG5cdFx0XHRcdGRlcHRoRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogZGVwdGhTdHIodmFsdWUpfSk7XHJcblx0XHRcdFx0dGhpcy5kZXB0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdHNsaWRlci5zaG93VG9vbHRpcCgpO1xyXG5cclxuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0XHR9KSk7XHJcblx0XHJcblx0dGhpcy5yZW5kZXIoKTtcclxuXHJcblx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250ZW50RWwpLnNldEJ1dHRvblRleHQoJ0dlbmVyYXRlJykub25DbGljaygoKSA9PiB7XHJcblx0XHR0aGlzLm9uU3VibWl0KHRoaXMuc2xpZGVzLCB0aGlzLnRpdGxlU2xpZGUsIHRoaXMubGFzdFNsaWRlKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9KVxyXG4gIH1cclxuXHJcbiAgZmxhdHRlbkxpbmtzKGxpbmtzOiBMaW5rVHJlZVR5cGVbXSkge1xyXG5cdGxpbmtzLmZvckVhY2goKGxpbms6IExpbmtUcmVlVHlwZSkgPT4ge1xyXG5cdFx0aWYgKHRoaXMuaWdub3JlZExpbmtzLmluY2x1ZGVzKGxpbmsubmFtZSkpXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdGlmIChsaW5rLmxldmVsICYmIHRoaXMubWF4RGVwdGggPD0gbGluay5sZXZlbCkgXHJcblx0XHRcdHRoaXMubWF4RGVwdGggPSBsaW5rLmxldmVsO1xyXG5cclxuXHRcdHRoaXMuZmxhdHRlbmVkTGlua3MucHVzaChsaW5rKTtcclxuXHRcdGlmICgnY2hpbGRyZW4nIGluIGxpbmsgJiYgbGluay5sZXZlbCkge1xyXG5cdFx0XHR0aGlzLmZsYXR0ZW5MaW5rcyhsaW5rLmNoaWxkcmVuKTtcclxuXHRcdH1cclxuXHR9KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG5cdHRoaXMubGlua3NFbC5lbXB0eSgpO1xyXG5cdGNvbnN0IGRlcHRoTGlua3MgPSB0aGlzLmZsYXR0ZW5lZExpbmtzLmZpbHRlcigobGluazogTGlua1RyZWVUeXBlKSA9PiBsaW5rLmxldmVsICYmIGxpbmsubGV2ZWwgPD0gdGhpcy5kZXB0aCk7XHJcblxyXG5cdHRoaXMuc2xpZGVzID0gZGVwdGhMaW5rcy5tYXAoKGxpbms6IExpbmtUcmVlVHlwZSkgPT4gKHsgbGluazogbGluaywgdHlwZTogJ2Jhc2ljJyB9KSlcclxuXHRcclxuXHRpZiAodGhpcy50aXRsZVNsaWRlKSB7XHJcblx0XHRjb25zdCBzbGlkZSA9IHRoaXMubGlua3NFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogJ3NsaWRlLXJvdyd9KTtcclxuXHRcdHNsaWRlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnMS4gVGl0bGUgc2xpZGUnIH0pO1xyXG5cdFx0Y29uc3QgZHJvcGRvd25FbCA9IHNsaWRlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdyb3ctcmlnaHQnfSlcclxuXHRcdG5ldyBEcm9wZG93bkNvbXBvbmVudChkcm9wZG93bkVsKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQodHJ1ZSlcclxuXHRcdFx0LmFkZE9wdGlvbihcInRpdGxlXCIsIFwidGl0bGVcIilcclxuXHR9XHJcblx0XHJcblx0ZGVwdGhMaW5rcy5mb3JFYWNoKChsaW5rOiBMaW5rVHJlZVR5cGUpID0+IHtcclxuXHRcdGNvbnN0IHNsaWRlID0gdGhpcy5saW5rc0VsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiAnc2xpZGUtcm93J30pO1xyXG5cdFx0c2xpZGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAke2xpbmsubGV2ZWx9OiAke2xpbmsubmFtZX1gIH0pO1xyXG5cclxuXHRcdGNvbnN0IGRyb3Bkb3duRWwgPSBzbGlkZS5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAncm93LXJpZ2h0J30pO1xyXG5cdFx0bmV3IERyb3Bkb3duQ29tcG9uZW50KGRyb3Bkb3duRWwpXHJcblx0XHRcdC5hZGRPcHRpb24oXCJiYXNpY1wiLCBcImJhc2ljXCIpXHJcblx0XHRcdC5hZGRPcHRpb24oXCJzcGxpdFwiLCBcInNwbGl0XCIpXHJcblx0XHRcdC5hZGRPcHRpb24oJ2ltYWdlJywgJ2ltYWdlJylcclxuXHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblxyXG5cdFx0XHRcdC8vIHVwZGF0ZSBzbGlkZXMgd2l0aCBuZXcgdHlwZSBvZiBzbGlkZSB2YWx1ZVxyXG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gdGhpcy5zbGlkZXMuZmluZEluZGV4KCh7IGxpbms6IHNsaWRlTGluayB9OiB7IGxpbms6IExpbmtUcmVlVHlwZX0pID0+IHNsaWRlTGluay5uYW1lID09PSBsaW5rLm5hbWUpO1xyXG5cdFx0XHRcdHRoaXMuc2xpZGVzW2luZGV4XVsndHlwZSddID0gdmFsdWU7XHJcblx0XHRcdH0pO1xyXG5cdH0pXHJcblxyXG5cdGlmICh0aGlzLmxhc3RTbGlkZSkge1xyXG5cdFx0Y29uc3Qgc2xpZGUgPSB0aGlzLmxpbmtzRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6ICdzbGlkZS1yb3cnfSk7XHJcblx0XHRzbGlkZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJzEuIExhc3Qgc2xpZGUnIH0pO1xyXG5cdFx0Y29uc3QgZHJvcGRvd25FbCA9IHNsaWRlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdyb3ctcmlnaHQnfSlcclxuXHRcdG5ldyBEcm9wZG93bkNvbXBvbmVudChkcm9wZG93bkVsKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQodHJ1ZSlcclxuXHRcdFx0LmFkZE9wdGlvbihcImxhc3RcIiwgXCJsYXN0XCIpXHJcblx0fVxyXG4gIH1cclxuXHJcbiAgb25DbG9zZSgpIHtcclxuICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXVEOzs7QUNBdkQsdUJBQXNFOzs7QUNBdEUsc0JBQTJCO0FBRXBCLElBQU0saUJBQWlCLENBQUMsU0FBaUI7QUFDL0MsU0FBTyxLQUFLLFFBQVEsNkRBQTZELEdBQUcsRUFBRSxLQUFLO0FBQzVGO0FBRU8sSUFBTSxnQkFBZ0IsT0FBTyxNQUFVLFNBQWlCO0FBQzlELFFBQU0sT0FBTyxLQUFJLE1BQU0sc0JBQXNCLElBQUk7QUFFakQsTUFBSSxDQUFFLGlCQUFnQjtBQUNyQixXQUFPO0FBRVIsU0FBTyxNQUFNLEtBQUksTUFBTSxXQUFXLElBQUk7QUFDdkM7OztBQ1hPLElBQU0saUJBQU4sTUFBcUI7QUFBQSxFQUszQixZQUFZLFFBQXFCLE9BQWUsZUFBd0IsY0FBdUI7QUFIL0Ysa0JBQXNCLENBQUM7QUFDdkIscUJBQW9CO0FBR25CLFNBQUssU0FBUztBQUVkLFNBQUssYUFBYSxLQUFLLGlCQUFpQjtBQUV4QyxRQUFJO0FBQ0gsV0FBSyxhQUFhLEtBQUssaUJBQWlCLEtBQUs7QUFFOUMsV0FBTyxRQUFRLENBQUMsVUFBcUI7QUFDcEMsVUFBSSxNQUFNLFNBQVM7QUFDbEIsYUFBSyxhQUFhLEtBQUssaUJBQWlCLE1BQU0sS0FBSyxJQUFJO0FBQUEsZUFDL0MsTUFBTSxTQUFTO0FBQ3ZCLGFBQUssYUFBYSxLQUFLLGlCQUFpQixNQUFNLEtBQUssSUFBSTtBQUFBLElBQ3pELENBQUM7QUFFRCxRQUFJO0FBQ0gsV0FBSyxhQUFhLEtBQUssZ0JBQWdCO0FBRXhDLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxtQkFBbUI7QUFDbEIsV0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNUjtBQUFBLEVBRUEsaUJBQWlCLE9BQWU7QUFDL0IsV0FBTztBQUFBO0FBQUE7QUFBQSxLQUNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSVQ7QUFBQSxFQUVBLGtCQUFrQjtBQUNqQixXQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFHUjtBQUFBLEVBRUEsaUJBQWlCLE1BQWM7QUFDOUIsV0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FHSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT1o7QUFBQSxFQUVBLGlCQUFpQixNQUFjO0FBQzlCLFdBQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBR0k7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFjWjtBQUNEOzs7QUNuRk8sSUFBTSxTQUFOLE1BQWE7QUFBQSxFQUduQixZQUFZLFNBQWtCLE1BQWMsU0FBb0MsTUFBZTtBQUM5RixTQUFLLE1BQU0sUUFBUSxTQUFTLFVBQVUsRUFBRSxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQ3ZELFNBQUssSUFBSSxVQUFVLE1BQU07QUFDeEIsY0FBUSxJQUFJO0FBQUEsSUFDYjtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQ0Q7OztBQ1BPLElBQU0sV0FBTixNQUFlO0FBQUEsRUFLckIsWUFBWSxTQUFjLFNBQWtCLE1BQWM7QUFDekQsU0FBSyxVQUFVO0FBQ2YsU0FBSyxVQUFVO0FBQ2YsU0FBSyxPQUFPO0FBRVosU0FBSyxPQUFPO0FBQUEsRUFDYjtBQUFBLEVBRUEsU0FBUztBQUNSLFVBQU0sWUFBWSxLQUFLLFFBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxLQUFLLE1BQU0sS0FBSyxjQUFjLENBQUM7QUFDcEYsY0FBVSxVQUFVLE1BQU07QUFDekIsV0FBSyxRQUFRLFVBQVUsYUFBYSxLQUFLLE1BQU0sRUFBRTtBQUFBLElBQ2xEO0FBQUEsRUFDRDtBQUVEO0FBR08sSUFBTSxPQUFOLE1BQVc7QUFBQSxFQVFqQixZQUFZLFNBQWMsU0FBa0IsTUFBb0IsWUFBcUIsTUFBTTtBQUYzRix3QkFBd0I7QUFHdkIsU0FBSyxPQUFPO0FBQ1osU0FBSyxVQUFVO0FBQ2YsU0FBSyxVQUFVO0FBRWYsUUFBSTtBQUNILFdBQUssT0FBTyxLQUFLO0FBRWxCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxPQUFPLE9BQWdCO0FBQ3RCLFNBQUssSUFBSSxLQUFLLFFBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxLQUFLLEtBQUssTUFBTSxLQUFLLE9BQU8sQ0FBQztBQUN6RSxLQUFDLEtBQUssS0FBSyxVQUFVLEtBQUssRUFBRSxTQUFTLHNCQUFzQjtBQUMzRCxTQUFLLEtBQUssVUFBVSxLQUFLLEVBQUUsU0FBUyxRQUFRO0FBQzVDLFNBQUssRUFBRSxVQUFVLE1BQU07QUFDdEIsV0FBSyxRQUFRLFVBQVUsYUFBYSxLQUFLLEtBQUssTUFBTSxFQUFFO0FBQ3RELE9BQUMsS0FBSyxLQUFLLFVBQVUsS0FBSyxFQUFFLFlBQVksc0JBQXNCO0FBQUEsSUFDL0Q7QUFFQSxTQUFLLE9BQU8sS0FBSztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxPQUFPLE9BQWdCO0FBQ3RCLFFBQUk7QUFDSCxXQUFLLEVBQUUsWUFBWSxlQUFlO0FBQUE7QUFFbEMsV0FBSyxFQUFFLFNBQVMsZUFBZTtBQUFBLEVBQ2pDO0FBQ0Q7OztBQy9EQSx1QkFBMkU7QUFFcEUsSUFBTSxZQUFOLGNBQXdCLHVCQUFNO0FBQUEsRUFNbkMsWUFBWSxNQUFVLFVBQXNDO0FBQzFELFVBQU0sSUFBRztBQUhYLHNCQUFzQjtBQUlwQixTQUFLLFdBQVc7QUFBQSxFQUNsQjtBQUFBLEVBRUEsYUFBYTtBQUNkLFVBQU0sVUFBVSxLQUFLLElBQUksTUFBTSxrQkFBa0IsRUFBRSxPQUFPLENBQUMsU0FBd0IsZ0JBQWdCLHdCQUFPO0FBQzFHLFdBQU8sUUFBUSxPQUFPLENBQUMsS0FBNkIsU0FBeUIsS0FBSSxLQUFLLFFBQVEsS0FBSyxNQUFNLE1BQU0sQ0FBQyxDQUFDO0FBQUEsRUFDaEg7QUFBQSxFQUVBLFNBQVM7QUFDUCxVQUFNLEVBQUUsY0FBYztBQUV0QixjQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRS9DLFVBQU0sVUFBVSxLQUFLLFdBQVc7QUFFN0IsUUFBSSx5QkFBUSxTQUFTLEVBQ2xCLFFBQVEsYUFBYSxFQUNyQixRQUFRLENBQUMsU0FDUixLQUFLLFNBQVMsQ0FBQyxVQUFVO0FBQ3ZCLFdBQUssT0FBTztBQUFBLElBQ2QsQ0FBQyxDQUFDO0FBRVQsUUFBSSx5QkFBUSxTQUFTLEVBQ2YsUUFBUSxpQkFBaUIsRUFDekIsWUFBWSxDQUFDLGFBQ1osU0FDSixXQUFXLE9BQU8sRUFDbEIsU0FBUyxDQUFDLFVBQWtCO0FBQzVCLFdBQUssU0FBUztBQUFBLElBQ2YsQ0FBQyxDQUNEO0FBRUMsUUFBSSx5QkFBUSxTQUFTLEVBQ2xCLFVBQVUsQ0FBQyxRQUNWLElBQ0csY0FBYyxlQUFlLEVBQzdCLE9BQU8sRUFDUCxRQUFRLE1BQU07QUEvQ3pCO0FBZ0RZLFdBQUssTUFBTTtBQUNwQixXQUFLLFNBQVMsV0FBSyxXQUFMLFlBQWUsS0FBSyxJQUFJLE1BQU0sUUFBUSxFQUFFO0FBQ3RELFdBQUssU0FBUyxvQ0FBYyxHQUFHLEtBQUssVUFBVSxLQUFLLFNBQVMsQ0FBQztBQUFBLElBQ3RELENBQUMsQ0FBQztBQUFBLEVBQ1Y7QUFBQSxFQUVBLFVBQVU7QUFDUixRQUFJLEVBQUUsY0FBYztBQUNwQixjQUFVLE1BQU07QUFBQSxFQUNsQjtBQUNGOzs7QUNuREEseUJBQXlCLE1BQW9CLFVBQW9CO0FBQ2hFLE1BQUksY0FBYyxNQUFNO0FBQ3ZCLFVBQU0sb0JBQW9CLEtBQUssU0FBUyxJQUFJLENBQUMsTUFBb0IsRUFBRSxJQUFJO0FBQ3ZFLGFBQVMsS0FBSyxHQUFHLGlCQUFpQjtBQUNsQyxTQUFLLFNBQVMsUUFBUSxDQUFDLE1BQW9CO0FBQzFDLHNCQUFnQixHQUFHLFFBQVE7QUFBQSxJQUM1QixDQUFDO0FBQUEsRUFDRjtBQUNBLFNBQU87QUFDUjtBQUVPLElBQU0sV0FBTixNQUFlO0FBQUEsRUFPckIsWUFBWSxNQUFVLFdBQW9CLFdBQTJCLE9BQXlDO0FBSDlHLHdCQUF5QixDQUFDO0FBQzFCLHFCQUE0QixDQUFDO0FBRzVCLFNBQUssTUFBTTtBQUNYLFFBQUksT0FBTyxVQUFVLFNBQVMsT0FBTyxFQUFFLEtBQUssWUFBVyxDQUFDO0FBQ3hELFNBQUssS0FBSyxLQUFLLFNBQVMsSUFBSTtBQUM1QixTQUFLLFlBQVk7QUFFakIsU0FBSyxPQUFPLEtBQUssV0FBVyxLQUFLLElBQUksQ0FBQyxHQUFHLEtBQUs7QUFBQSxFQUMvQztBQUFBLEVBRUEsT0FBTyxPQUF1QixRQUFpQixlQUF5QixPQUFrQztBQUN6RyxRQUFJLENBQUM7QUFDSixzQkFBZ0IsQ0FBQztBQUVsQixVQUFNLFFBQVEsQ0FBQyxTQUF1QjtBQUNyQyxZQUFNLEtBQUssT0FBTyxTQUFTLElBQUk7QUFDL0IsWUFBTSxTQUFTLElBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxNQUFNLEtBQUs7QUFFakQsVUFBSSxRQUFpQixDQUFDLGNBQWMsU0FBUyxPQUFPLEtBQUssSUFBSTtBQUU3RCxVQUFJLENBQUMsS0FBSztBQUNULGdCQUFRO0FBRVQsVUFBSSxTQUFTLElBQUksT0FBTyxLQUFLLFFBQVEsTUFBTTtBQUMxQyxjQUFNLGtCQUFrQixDQUFDLE9BQU8sS0FBSyxNQUFNLEdBQUcsZ0JBQWdCLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQztBQUU5RSxZQUFJLFNBQVMsT0FBTztBQUVuQiwwQkFBZ0IsY0FBYyxPQUFPLENBQUMsT0FBZSxDQUFDLGdCQUFnQixTQUFTLEVBQUUsQ0FBQztBQUFBLFFBQ25GLE9BQU87QUFDTix3QkFBYyxLQUFLLEdBQUcsZUFBZTtBQUdyQywwQkFBZ0IsQ0FBQyxHQUFHLElBQUksSUFBSSxhQUFhLENBQUM7QUFBQSxRQUMzQztBQUVBLGFBQUssZUFBZTtBQUdwQixhQUFLLEdBQUcsTUFBTTtBQUNkLGFBQUssT0FBTyxLQUFLLFdBQVcsS0FBSyxJQUFJLGVBQWUsS0FBSztBQUFBLE1BQzFELENBQUM7QUFFRCxhQUFPLE9BQU8sS0FBSztBQUVuQixVQUFJLGNBQWMsTUFBTTtBQUN2QixjQUFNLEtBQUssR0FBRyxTQUFTLElBQUk7QUFDM0IsYUFBSyxPQUFPLEtBQUssVUFBVSxJQUFJLGVBQWUsS0FBSztBQUFBLE1BQ3BEO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTyxNQUFNLEtBQUssWUFBWTtBQUFBLEVBQy9CO0FBQ0Q7OztBQzdFTyxJQUFNLFdBQU4sTUFBZTtBQUFBLEVBR3JCLFlBQVksU0FBa0IsT0FBZ0IsUUFBaUIsU0FBc0M7QUFDcEcsU0FBSyxLQUFLLFFBQVEsU0FBUyxTQUFTO0FBQUEsTUFDbkMsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ04sQ0FBQztBQUVELFNBQUssR0FBRyxVQUFVO0FBRWxCLFFBQUksQ0FBQyxRQUFRO0FBQ1osV0FBSyxHQUFHLFdBQVc7QUFDbkIsV0FBSyxHQUFHLFVBQVU7QUFDbEIsV0FBSyxHQUFHLFNBQVMsdUJBQXVCO0FBQUEsSUFDekM7QUFDQSxTQUFLLEdBQUcsVUFBVSxNQUFNO0FBQ3ZCLGNBQVEsSUFBSTtBQUFBLElBQ2I7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUNEOzs7QUNyQkEsdUJBQXdFO0FBS2pFLElBQU0sY0FBTixjQUEwQix1QkFBTTtBQUFBLEVBWXJDLFlBQVksTUFBVSxPQUF1QixjQUF3QixVQUFrRjtBQUNySixVQUFNLElBQUc7QUFUWCwwQkFBaUMsQ0FBQztBQUlsQyxvQkFBVztBQUNYLHNCQUFzQjtBQUN0QixxQkFBcUI7QUFJdEIsU0FBSyxRQUFRO0FBQ2IsU0FBSyxlQUFlO0FBQ2pCLFNBQUssV0FBVztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxTQUFTO0FBQ1AsVUFBTSxFQUFFLGNBQWM7QUFFekIsY0FBVSxNQUFNO0FBQ2IsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUVqRCxTQUFLLGFBQWEsS0FBSyxLQUFLO0FBRTVCLFVBQU0sYUFBYSxVQUFVLFNBQVMsS0FBSztBQUUzQyxVQUFNLFdBQVcsQ0FBQyxVQUFrQixpQkFBaUI7QUFFckQsU0FBSyxRQUFRLEtBQUs7QUFFbEIsY0FBVSxTQUFTLE9BQU8sRUFBRSxNQUFNLFlBQVcsQ0FBQztBQUU5QyxVQUFNLGVBQWUsVUFBVSxTQUFTLEtBQUs7QUFDN0MsUUFBSSxTQUFTLGNBQWMsS0FBSyxZQUFZLE1BQU0sTUFBTTtBQUN2RCxXQUFLLGFBQWEsQ0FBQyxLQUFLO0FBQ3hCLFdBQUssT0FBTztBQUFBLElBQ2IsQ0FBQztBQUNELGlCQUFhLFNBQVMsUUFBUSxFQUFFLE1BQU0sY0FBYSxDQUFDO0FBRXBELFVBQU0sY0FBYyxVQUFVLFNBQVMsS0FBSztBQUM1QyxRQUFJLFNBQVMsYUFBYSxLQUFLLFdBQVcsTUFBTSxNQUFNO0FBQ3JELFdBQUssWUFBWSxDQUFDLEtBQUs7QUFDdkIsV0FBSyxPQUFPO0FBQUEsSUFDYixDQUFDO0FBQ0QsZ0JBQVksU0FBUyxRQUFRLEVBQUUsTUFBTSxhQUFZLENBQUM7QUFFbEQsU0FBSyxVQUFVLFVBQVUsU0FBUyxLQUFLO0FBRXBDLFFBQUkseUJBQVEsVUFBVSxFQUN2QixRQUFRLFNBQVMsS0FBSyxRQUFRLENBQUMsRUFDL0IsUUFBUSxxREFBcUQsRUFDN0QsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxRQUFRLEVBQ3RCLFVBQVUsR0FBRyxLQUFLLFVBQVUsQ0FBQyxFQUM3QixTQUFTLE9BQU8sVUFBVTtBQUMxQixZQUFNLFVBQVUsV0FBVyxTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVM7QUFDNUQsY0FBUSxNQUFNO0FBQ2QsY0FBUSxTQUFTLE9BQU8sRUFBRSxNQUFNLFNBQVMsS0FBSyxFQUFDLENBQUM7QUFDaEQsV0FBSyxRQUFRO0FBQ2IsYUFBTyxZQUFZO0FBRW5CLFdBQUssT0FBTztBQUFBLElBQ2IsQ0FBQyxDQUFDO0FBRUosU0FBSyxPQUFPO0FBRVosUUFBSSxpQ0FBZ0IsU0FBUyxFQUFFLGNBQWMsVUFBVSxFQUFFLFFBQVEsTUFBTTtBQUN0RSxXQUFLLFNBQVMsS0FBSyxRQUFRLEtBQUssWUFBWSxLQUFLLFNBQVM7QUFDMUQsV0FBSyxNQUFNO0FBQUEsSUFDWixDQUFDO0FBQUEsRUFDQTtBQUFBLEVBRUEsYUFBYSxPQUF1QjtBQUNyQyxVQUFNLFFBQVEsQ0FBQyxTQUF1QjtBQUNyQyxVQUFJLEtBQUssYUFBYSxTQUFTLEtBQUssSUFBSTtBQUN2QztBQUVELFVBQUksS0FBSyxTQUFTLEtBQUssWUFBWSxLQUFLO0FBQ3ZDLGFBQUssV0FBVyxLQUFLO0FBRXRCLFdBQUssZUFBZSxLQUFLLElBQUk7QUFDN0IsVUFBSSxjQUFjLFFBQVEsS0FBSyxPQUFPO0FBQ3JDLGFBQUssYUFBYSxLQUFLLFFBQVE7QUFBQSxNQUNoQztBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0E7QUFBQSxFQUVBLFNBQVM7QUFDVixTQUFLLFFBQVEsTUFBTTtBQUNuQixVQUFNLGFBQWEsS0FBSyxlQUFlLE9BQU8sQ0FBQyxTQUF1QixLQUFLLFNBQVMsS0FBSyxTQUFTLEtBQUssS0FBSztBQUU1RyxTQUFLLFNBQVMsV0FBVyxJQUFJLENBQUMsU0FBd0IsR0FBRSxNQUFZLE1BQU0sUUFBUSxFQUFFO0FBRXBGLFFBQUksS0FBSyxZQUFZO0FBQ3BCLFlBQU0sUUFBUSxLQUFLLFFBQVEsU0FBUyxPQUFPLEVBQUUsS0FBSyxZQUFXLENBQUM7QUFDOUQsWUFBTSxTQUFTLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2pELFlBQU0sYUFBYSxNQUFNLFNBQVMsUUFBUSxFQUFFLEtBQUssWUFBVyxDQUFDO0FBQzdELFVBQUksbUNBQWtCLFVBQVUsRUFDOUIsWUFBWSxJQUFJLEVBQ2hCLFVBQVUsU0FBUyxPQUFPO0FBQUEsSUFDN0I7QUFFQSxlQUFXLFFBQVEsQ0FBQyxTQUF1QjtBQUMxQyxZQUFNLFFBQVEsS0FBSyxRQUFRLFNBQVMsT0FBTyxFQUFFLEtBQUssWUFBVyxDQUFDO0FBQzlELFlBQU0sU0FBUyxRQUFRLEVBQUUsTUFBTSxHQUFHLEtBQUssVUFBVSxLQUFLLE9BQU8sQ0FBQztBQUU5RCxZQUFNLGFBQWEsTUFBTSxTQUFTLFFBQVEsRUFBRSxLQUFLLFlBQVcsQ0FBQztBQUM3RCxVQUFJLG1DQUFrQixVQUFVLEVBQzlCLFVBQVUsU0FBUyxPQUFPLEVBQzFCLFVBQVUsU0FBUyxPQUFPLEVBQzFCLFVBQVUsU0FBUyxPQUFPLEVBQzFCLFNBQVMsQ0FBQyxVQUFrQjtBQUc1QixjQUFNLFFBQVEsS0FBSyxPQUFPLFVBQVUsQ0FBQyxFQUFFLE1BQU0sZ0JBQXVDLFVBQVUsU0FBUyxLQUFLLElBQUk7QUFDaEgsYUFBSyxPQUFPLE9BQU8sVUFBVTtBQUFBLE1BQzlCLENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxRQUFJLEtBQUssV0FBVztBQUNuQixZQUFNLFFBQVEsS0FBSyxRQUFRLFNBQVMsT0FBTyxFQUFFLEtBQUssWUFBVyxDQUFDO0FBQzlELFlBQU0sU0FBUyxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRCxZQUFNLGFBQWEsTUFBTSxTQUFTLFFBQVEsRUFBRSxLQUFLLFlBQVcsQ0FBQztBQUM3RCxVQUFJLG1DQUFrQixVQUFVLEVBQzlCLFlBQVksSUFBSSxFQUNoQixVQUFVLFFBQVEsTUFBTTtBQUFBLElBQzNCO0FBQUEsRUFDQztBQUFBLEVBRUEsVUFBVTtBQUNSLFFBQUksRUFBRSxjQUFjO0FBQ3BCLGNBQVUsTUFBTTtBQUFBLEVBQ2xCO0FBQ0Y7OztBUjlITyxJQUFNLDZCQUE2QjtBQUduQyxJQUFNLG9CQUFOLGNBQStCLDBCQUFTO0FBQUEsRUF5QjlDLFlBQVksTUFBcUIsVUFBOEM7QUFDOUUsVUFBTSxJQUFJO0FBZlgscUJBQTRCLENBQUM7QUFDN0IsdUJBQStCLENBQUM7QUFDaEMsb0JBQW1CO0FBQ25CLHFCQUFzQixDQUFDO0FBQ3ZCLHlCQUEwQixDQUFDO0FBRTNCLG9CQUFtQjtBQUNuQix3QkFBeUIsQ0FBQztBQUMxQixrQkFBbUIsQ0FBQztBQUVwQiwwQkFBeUI7QUFNeEIsU0FBSyxXQUFXO0FBQUEsRUFDakI7QUFBQSxFQUVBLE1BQU0sU0FBUztBQUNkLFVBQU0sWUFBWSxLQUFLLFlBQVksU0FBUztBQUU1QyxTQUFLLFlBQVk7QUFDakIsY0FBVSxNQUFNO0FBRWhCLFNBQUssVUFBVSxVQUFVLFNBQVMsS0FBSztBQUN2QyxTQUFLLHdCQUF3QixLQUFLLFFBQVEsU0FBUyxNQUFNO0FBQ3pELFNBQUsseUJBQXlCLEtBQUssUUFBUSxTQUFTLE1BQU07QUFDMUQsU0FBSyx1QkFBdUIsS0FBSyxRQUFRLFNBQVMsTUFBTTtBQUN4RCxTQUFLLFlBQVksS0FBSyxVQUFVLFNBQVMsS0FBSztBQUU5QyxRQUFJLE9BQU8sS0FBSyx1QkFBdUIsb0JBQW9CLE1BQU07QUFFaEUsV0FBSyxZQUFZLENBQUM7QUFDbEIsV0FBSyxXQUFXO0FBQ2hCLFdBQUssWUFBWSxDQUFDO0FBQ2xCLFdBQUssZ0JBQWdCLENBQUM7QUFDdEIsV0FBSyxlQUFlLENBQUM7QUFDckIsV0FBSyxXQUFXO0FBRWhCLFdBQUssVUFBVSxNQUFNO0FBQ3JCLFdBQUssdUJBQXVCLE1BQU07QUFDbEMsV0FBSyxxQkFBcUIsTUFBTTtBQUNoQyxXQUFLLGlCQUFpQjtBQUFBLElBQ3ZCLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxXQUFXLE1BQWMsUUFBaUIsT0FBTztBQUNoRCxVQUFNLFFBQVEsS0FBSyxTQUFTLGdCQUFnQjtBQUM1QyxRQUFJLGFBQWEsQ0FBQyxHQUFHLEtBQUssRUFBRSxJQUFJLE9BQUssRUFBRSxFQUFFO0FBRXpDLGlCQUFhLENBQUMsR0FBRyxJQUFJLElBQUksVUFBVSxDQUFDO0FBR3BDLGlCQUFhLFdBQVcsT0FBTyxRQUFNLENBQUMsR0FBRyxXQUFXLEdBQUcsQ0FBQztBQUV4RCxpQkFBYSxXQUFXLE9BQU8sUUFBTSxDQUFDLEdBQUcsV0FBVyxHQUFHLEtBQUssU0FBUyxpQkFBaUIsQ0FBQztBQUV2RixVQUFNLGdCQUFnQixXQUFXLElBQUksQ0FBQyxPQUFlO0FBQ3BELFdBQUssZUFBZSxFQUFFO0FBRXRCLFVBQUksQ0FBQyxDQUFDLGtCQUFpQixXQUFXLE9BQU8sQ0FBQyxPQUFlLEdBQUcsU0FBUyxHQUFHLFlBQVksQ0FBQyxDQUFDLEVBQUUsUUFBUTtBQUMvRixhQUFLLE9BQU8sS0FBSyxFQUFFO0FBQ25CLGVBQU87QUFBQSxNQUNSO0FBRUEsVUFBSSxXQUFXO0FBQ2YsVUFBSSxLQUFLLFNBQVMsS0FBSyxTQUFTLGtCQUFrQixHQUFHO0FBQ3BELFlBQUksQ0FBQyxZQUFZLGFBQWEsS0FBSyxNQUFNLEtBQUssU0FBUyxrQkFBa0I7QUFDekUsWUFBSSxDQUFDLFdBQVcsU0FBUyxFQUFFO0FBQzFCLHFCQUFXO0FBQUEsTUFDYjtBQUVBLFVBQUksVUFBVTtBQUNkLFVBQUksT0FBTztBQUNWLG1CQUFXO0FBQ1gsa0JBQVU7QUFBQSxNQUNYO0FBRUEsWUFBTSxPQUFPLEtBQUssWUFBWSxLQUFLLENBQUMsTUFBYSxFQUFFLGdCQUFnQixFQUFFO0FBRXJFLGFBQU87QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLFFBQVEsQ0FBQyxDQUFDO0FBQUEsUUFDVixRQUFRO0FBQUEsUUFDUixPQUFPO0FBQUEsUUFDUCxNQUFNLDZCQUFNO0FBQUEsTUFDYjtBQUFBLElBQ0QsQ0FBQyxFQUFFLE9BQU8sT0FBTztBQUVqQixXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsTUFBTSxtQkFBbUI7QUFDeEIsU0FBSyxjQUFjLElBQUksTUFBTSxpQkFBaUI7QUFFOUMsVUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFFcEQsUUFBSSxDQUFDLFlBQVk7QUFDaEIsVUFBSSx3QkFBTywyQkFBMkI7QUFDdEMsWUFBTSxJQUFJLE1BQU0sMkJBQTJCO0FBQUEsSUFDNUM7QUFDQSxVQUFNLGlCQUFpQixNQUFNLGNBQWMsS0FBSyxLQUFLLFdBQVcsSUFBSTtBQUVwRSxVQUFNLG1CQUFtQixLQUFLLFdBQVcsZ0JBQWdCLElBQUk7QUFFN0QsU0FBSyxnQkFBZ0IsaUJBQWlCLElBQUksQ0FBQyxNQUFvQixFQUFFLElBQUk7QUFFckUsU0FBSyxZQUFZLE1BQU0sS0FBSyx1QkFBdUIsZ0JBQWdCO0FBRW5FLFVBQU0sUUFBUSxXQUFXO0FBQ3pCLFFBQUksU0FBUyxLQUFLLEtBQUssS0FBSyxXQUFXLEtBQUs7QUFFNUMsUUFBSSxTQUFTLEtBQUssS0FBSyxLQUFLLFdBQVcsS0FBSyxXQUFXLENBQUMsaUJBQTJCO0FBQ2xGLFdBQUssZUFBZTtBQUFBLElBQ3JCLENBQUM7QUFFRCxRQUFJLE9BQU8sS0FBSyx3QkFBd0IscUJBQXFCLE1BQU07QUFHbEUsV0FBSyxXQUFXO0FBRWhCLFdBQUsscUJBQXFCLEtBQUssV0FBVyxjQUFjO0FBQUEsSUFDekQsR0FBRyxFQUFFLEtBQUssd0JBQXdCLENBQUM7QUFFbkMsUUFBSSxPQUFPLEtBQUssc0JBQXNCLHNCQUFzQixNQUFNO0FBQ2pFLFVBQUksWUFBWSxLQUFLLEtBQUssS0FBSyxXQUFXLEtBQUssY0FBYyxDQUFDLFFBQXFCLGVBQXdCLGlCQUEwQjtBQUNwSSxjQUFNLFdBQVcsSUFBSSxlQUFlLFFBQVEsT0FBTyxlQUFlLFlBQVk7QUFFOUUsWUFBSSxVQUFVLEtBQUssS0FBSyxPQUFPLFNBQWlCO0FBQy9DLGdCQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsTUFBTSxNQUFNLFNBQVMsU0FBUztBQUMzRCxjQUFJLHdCQUFPLGFBQWEsMkJBQTJCO0FBQ25ELGVBQUssSUFBSSxVQUFVLGFBQWEsTUFBTSxFQUFFO0FBQUEsUUFFekMsQ0FBQyxFQUFFLEtBQUs7QUFBQSxNQUNULENBQUMsRUFBRSxLQUFLO0FBQUEsSUFDVCxHQUFHLEVBQUUsS0FBSyx3QkFBd0IsQ0FBQztBQUFBLEVBQ3BDO0FBQUEsRUFFQSxNQUFNLHFCQUFxQixPQUF1QixVQUFrQjtBQUVuRSxTQUFLLGdCQUFnQixLQUFLO0FBRTFCLFNBQUssV0FBVyxLQUFLLFNBQVMsS0FBSztBQUVuQyxRQUFJLEtBQUssU0FBUyxpQkFBaUI7QUFFbEMsV0FBSyxjQUFjLFFBQVEsQ0FBQyxRQUFnQjtBQUMzQyxjQUFNLGVBQWUsR0FBRztBQUN4QixtQkFBVyxTQUFTLFdBQVcsS0FBSyxTQUFTLE1BQU0sT0FBTztBQUFBLE1BQzNELENBQUM7QUFFRCxXQUFLLFdBQVcsV0FBVyxPQUFPLEtBQUs7QUFBQSxJQUN4QztBQUVBLFFBQUksS0FBSyxTQUFTLHNCQUFzQjtBQUN2QyxZQUFNLGlCQUFpQixLQUFLLHFCQUFxQixPQUFPLEVBQUU7QUFDMUQsV0FBSyxXQUFXLGlCQUFpQixPQUFPLEtBQUs7QUFBQSxJQUM5QztBQUVBLFFBQUksVUFBVSxLQUFLLEtBQUssT0FBTyxTQUFpQjtBQUMvQyxZQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsTUFBTSxNQUFNLEtBQUssUUFBUTtBQUN0RCxVQUFJLHdCQUFPLFFBQVEsMkJBQTJCO0FBQzlDLFdBQUssSUFBSSxVQUFVLGFBQWEsTUFBTSxFQUFFO0FBQUEsSUFDekMsQ0FBQyxFQUFFLEtBQUs7QUFBQSxFQUVUO0FBQUEsRUFFQSxnQkFBZ0IsT0FBdUI7QUFDdEMsVUFBTSxjQUFjLE1BQU0sT0FBTyxVQUFRLEtBQUssTUFBTTtBQUNwRCxTQUFLLFdBQVcsS0FBSyx1QkFBdUIsS0FBSyxVQUFVLFdBQVc7QUFFdEUsVUFBTSxRQUFRLENBQUMsU0FBdUI7QUFFckMsVUFBSSxLQUFLLGFBQWEsU0FBUyxLQUFLLElBQUk7QUFDdkM7QUFHRCxVQUFJLE9BQU8sS0FBSyxLQUFLLEtBQUs7QUFFMUIsVUFBSSxLQUFLLFVBQVU7QUFDbEI7QUFFRCxhQUFPLEtBQUssVUFBVSxNQUFNLElBQUk7QUFHaEMsVUFBSSxLQUFLLFNBQVMsS0FBSyxTQUFTLGtCQUFrQixHQUFHO0FBQ3BELFlBQUksQ0FBQyxlQUFlLFdBQVcsS0FBSyxNQUFNLEtBQUssU0FBUyxrQkFBa0I7QUFDMUUsZUFBTyxjQUFjLEtBQUs7QUFBQSxNQUMzQjtBQUVBLFlBQU0sUUFBUSxLQUFLLGVBQWUsSUFBSTtBQUV0QyxhQUFPLEdBQUc7QUFBQSxFQUFVO0FBRXBCLFVBQUksQ0FBQyxLQUFLO0FBQ1QsYUFBSyxZQUFZO0FBQUEsRUFBSztBQUFBO0FBRXZCLFdBQUssV0FBVyxLQUFLLFNBQVMsUUFBUSxLQUFLLEtBQUssVUFBVSxNQUFNLEtBQUssUUFBUTtBQUU3RSxVQUFJLGNBQWM7QUFDakIsYUFBSyxnQkFBZ0IsS0FBSyxRQUFRO0FBQUEsSUFDcEMsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFVBQVUsTUFBb0IsTUFBYztBQUUzQyxRQUFJLFdBQVcsS0FBSyxNQUFNLElBQUk7QUFDOUIsUUFBSSxXQUFXLGVBQWUsU0FBUyxFQUFFO0FBQ3pDLFFBQUksU0FBUyxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUc7QUFDeEMsZUFBUyxNQUFNO0FBQ2YsYUFBTyxTQUFTLEtBQUssSUFBSSxFQUFFLEtBQUs7QUFBQSxJQUNqQztBQUdBLFdBQU8sS0FBSyxRQUFRLGVBQWUsRUFBRTtBQUVyQyxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsZUFBZSxNQUFvQjtBQUNsQyxRQUFJLFFBQVE7QUFDWixRQUFJLEtBQUssUUFBUTtBQUVoQixjQUFRLFNBQVMsS0FBSztBQUFBLElBQ3ZCLE9BQU87QUFFTixZQUFNLGNBQWMsTUFBTSxLQUFLLEtBQUssRUFBRSxLQUFLLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDdkQsY0FBUSxHQUFHLGVBQWUsS0FBSztBQUFBLElBQ2hDO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLE1BQU0sdUJBQXVCLE9BQXVCO0FBQ25ELFVBQU0sV0FBOEIsTUFBTSxLQUFLLHNCQUFzQixPQUFPLEdBQUcsQ0FBQyxDQUFDO0FBQ2pGLFFBQUksV0FBMkIsQ0FBQztBQUVoQyxXQUFPLEtBQUssUUFBUSxFQUFFLFFBQVEsU0FBTztBQTFRdkM7QUEyUUcsWUFBTSxFQUFDLGNBQWMsU0FBUSxTQUFTO0FBQ3RDLGVBQVMsS0FBSyxFQUFDLEdBQUcsTUFBTSxRQUFTLHFCQUFTLFNBQVQsbUJBQWdFLGNBQWhFLG1CQUEyRSxLQUFJLENBQUM7QUFBQSxJQUNsSCxDQUFDO0FBRUQsVUFBTSwyQkFBMkIsQ0FBQyxLQUFxQixXQUErQjtBQUNyRixVQUFJLFdBQVcsQ0FBQztBQUNoQixlQUFRLElBQUksR0FBRyxJQUFJLElBQUksUUFBUSxLQUFLO0FBQ25DLFlBQUcsSUFBSSxHQUFHLFVBQVUsUUFBUTtBQUMzQixnQkFBTSxnQkFBZ0IseUJBQXlCLEtBQUssSUFBSSxHQUFHLElBQUk7QUFDL0QsY0FBRyxjQUFjLFFBQVE7QUFDeEIsZ0JBQUksR0FBRyxXQUFXO0FBQUEsVUFDbkI7QUFDQSxtQkFBUyxLQUFLLElBQUksRUFBRTtBQUFBLFFBQ3JCO0FBQUEsTUFDRDtBQUNBLGFBQU87QUFBQSxJQUNSO0FBQ0EsV0FBTyx5QkFBeUIsVUFBVSxNQUFTO0FBQUEsRUFDcEQ7QUFBQSxFQUVBLE1BQU0sc0JBQXNCLE9BQTRCLE9BQWUsV0FBcUIsV0FBb0IsY0FBdUI7QUFDdEksbUJBQWdCLHNDQUFzQyxDQUFDO0FBRXZELHFCQUFpQixDQUFDLE9BQU8sU0FBUyxNQUFNLFFBQVEsR0FBRztBQUdsRCxVQUFJLEtBQUssY0FBYyxTQUFTLEtBQUssSUFBSSxLQUFLLFNBQVM7QUFDdEQ7QUFHRCxVQUFJLFVBQVUsU0FBUyxLQUFLLElBQUk7QUFDL0I7QUFFRCxnQkFBVSxLQUFLLEtBQUssSUFBSTtBQUV4QixVQUFJLE9BQU8sTUFBTSxjQUFjLEtBQUssS0FBSyxLQUFLLElBQUk7QUFDbEQsWUFBTSxXQUFXLEtBQUssV0FBVyxJQUFJO0FBRXJDLFdBQUssV0FBVyxRQUFRO0FBRXhCLFVBQUksS0FBSyxTQUFTLEtBQUssU0FBUyxrQkFBa0IsR0FBRztBQUNwRCxZQUFJLENBQUMsZUFBZSxXQUFXLEtBQUssTUFBTSxLQUFLLFNBQVMsa0JBQWtCO0FBQzFFLGVBQU8sY0FBYyxLQUFLO0FBQUEsTUFDM0I7QUFFQSxNQUFDLGFBQXFCLEtBQUssUUFBUSxFQUFFLEdBQUcsTUFBTSxXQUFXLE9BQU8sS0FBSyxVQUFVLE9BQU8sS0FBSTtBQUUxRixVQUFJLE1BQU0sU0FBUztBQUNsQixjQUFNLEtBQUssc0JBQXNCLFVBQVUsS0FBSyxVQUFVLFdBQVksYUFBcUIsS0FBSyxPQUFPLFlBQVk7QUFBQSxJQUNySDtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxxQkFBcUIsT0FBdUIsaUJBQXlCLElBQUk7QUFDeEUsVUFBTSxRQUFRLENBQUMsU0FBdUI7QUFDckMsVUFBSSxLQUFLLFVBQVUsS0FBSyxPQUFPO0FBQzlCLFlBQUksS0FBSyxhQUFhLFNBQVMsS0FBSyxJQUFJO0FBQ3ZDO0FBRUQsY0FBTSxPQUFPLE1BQU0sS0FBSyxRQUFRLENBQUMsRUFBRSxLQUFLLEdBQUksRUFBRSxLQUFLLEVBQUU7QUFFckQsMEJBQWtCLEdBQUcsWUFBWSxLQUFLO0FBQUE7QUFBQSxNQUN2QztBQUVBLFVBQUksY0FBYztBQUNqQiwwQkFBa0IsS0FBSyxxQkFBcUIsS0FBSyxRQUFRO0FBQUEsSUFDM0QsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSx1QkFBdUIsTUFBYyxPQUF1QjtBQU0zRCxRQUFJLGFBQTRCLENBQUM7QUFFakMsVUFBTSxPQUFPLEtBQUssTUFBTSxJQUFJO0FBQzVCLFVBQU0sYUFBdUIsQ0FBQztBQUM5QixTQUFLLFFBQVEsQ0FBQyxLQUFLLFVBQVU7QUFDNUIsVUFBSSxPQUFPLElBQUk7QUFDZCxtQkFBVyxLQUFLLENBQUMsQ0FBQztBQUNsQixtQkFBVyxLQUFLLEtBQUs7QUFBQSxNQUN0QjtBQUNDLG1CQUFXLEtBQUssR0FBRztBQUFBLElBQ3JCLENBQUM7QUFDRCxlQUFXLEtBQUssQ0FBQyxDQUFDO0FBQ2xCLGVBQVcsS0FBSyxXQUFXLFNBQU8sQ0FBQztBQUVuQyxVQUFNLFFBQVEsVUFBUTtBQUNyQixZQUFNLFFBQVEsV0FBVyxVQUFVLFNBQU8sT0FBTyxRQUFRLFlBQVksSUFBSSxTQUFTLEtBQUssS0FBSyxRQUFRLENBQUM7QUFHckcsWUFBTSxvQkFBb0IsV0FBVyxPQUFPLGVBQWEsWUFBWSxLQUFLLEVBQUU7QUFFNUUsWUFBTSxRQUFRLEtBQUssZUFBZSxJQUFJO0FBR3RDLFVBQUksUUFBTyxLQUFLLEtBQUssS0FBSztBQUUxQixVQUFJLE1BQUssVUFBVTtBQUNsQjtBQUVELFVBQUksS0FBSyxhQUFhLFNBQVMsS0FBSyxJQUFJO0FBQ3ZDO0FBRUQsY0FBTyxLQUFLLFVBQVUsTUFBTSxLQUFJO0FBRWhDLE1BQUMsV0FBVyxtQkFBcUMsS0FBSyxNQUFNLE9BQU8sS0FBSTtBQUFBLElBQ3hFLENBQUM7QUFHRCxXQUFPLFdBQ0wsSUFBSSxTQUFPLE9BQU8sUUFBUSxXQUFXLE1BQU0sSUFBSSxLQUFLLElBQUksQ0FBQyxFQUN6RCxLQUFLLElBQUk7QUFBQSxFQUNaO0FBQUEsRUFFQSxNQUFNLFVBQVU7QUFBQSxFQUVoQjtBQUFBLEVBRUEsY0FBYztBQUNiLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxpQkFBaUI7QUFDaEIsV0FBTztBQUFBLEVBQ1I7QUFDRDtBQTVYTyxJQUFNLG1CQUFOO0FBdUJOLEFBdkJZLGlCQXVCTCxhQUFhLENBQUMsT0FBTyxRQUFRLE9BQU8sT0FBTyxRQUFRLFFBQVEsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFlLElBQUksSUFBSTs7O0FEOUJ0RyxJQUFNLG1CQUF1RDtBQUFBLEVBQzVELG9CQUFvQjtBQUFBLEVBQ3BCLGdCQUFnQjtBQUFBLEVBQ2hCLHNCQUFzQjtBQUFBLEVBQ3RCLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUNsQjtBQUVBLElBQXFCLHlCQUFyQixjQUFvRCx3QkFBTztBQUFBLEVBRzFELE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFNBQUssY0FBYyxJQUFJLGlDQUFpQyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBRXZFLFNBQUssYUFDSiw0QkFDQSxDQUFDLFNBQVMsSUFBSSxpQkFBaUIsTUFBTSxLQUFLLFFBQVEsQ0FDbkQ7QUFFQSxTQUFLLGNBQWMsVUFBVSxlQUFlLE1BQU07QUFDakQsV0FBSyw2QkFBNkI7QUFBQSxJQUNuQyxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBTSwrQkFBK0I7QUFDcEMsUUFBSSxDQUFDLEtBQUssSUFBSSxVQUFVLGdCQUFnQiwwQkFBMEIsRUFBRSxRQUFRO0FBQzNFLFlBQU0sS0FBSyxJQUFJLFVBQVUsYUFBYSxLQUFLLEVBQUUsYUFBYTtBQUFBLFFBQ3pELE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUNQLENBQUM7QUFBQSxJQUNKO0FBRUEsU0FBSyxJQUFJLFVBQVUsV0FDakIsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLDBCQUEwQixFQUFFLEVBQ2pFO0FBQUEsRUFDRDtBQUFBLEVBRUEsV0FBVztBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFDRDtBQUVBLElBQU0sbUNBQU4sY0FBK0Msa0NBQWlCO0FBQUEsRUFHL0QsWUFBWSxNQUFVLFFBQWdDO0FBQ3JELFVBQU0sTUFBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLFVBQWdCO0FBRWYsVUFBTSxFQUFFLGdCQUFnQjtBQUV4QixnQkFBWSxNQUFNO0FBRWxCLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLHVCQUF1QixFQUMvQixRQUFRLG9EQUFvRCxFQUM1RCxRQUFRLFVBQVEsS0FDZixlQUFlLDBCQUF1QixFQUN0QyxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUNoRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUN0QixRQUFRLGlCQUFpQixFQUN6QixRQUFRLDZCQUE2QixFQUNyQyxRQUFRLFVBQVEsS0FDZixlQUFlLDBCQUEwQixFQUN6QyxTQUFTLEtBQUssT0FBTyxTQUFTLGNBQWMsRUFDNUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsaUJBQWlCO0FBQ3RDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQUM7QUFFSCxRQUFJLHlCQUFRLFdBQVcsRUFDdEIsUUFBUSwyQkFBMkIsRUFDbkMsUUFBUSwrREFBK0QsRUFDdkUsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLEVBQ2xELFNBQVMsV0FBUztBQUNsQixXQUFLLE9BQU8sU0FBUyx1QkFBdUI7QUFBQSxJQUM3QyxDQUFDLENBQ0Y7QUFFQSxRQUFJLHlCQUFRLFdBQVcsRUFDdEIsUUFBUSxvQkFBb0IsRUFDNUIsUUFBUSx3REFBd0QsRUFDaEUsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxFQUM3QyxTQUFTLFdBQVM7QUFDbEIsV0FBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQUEsSUFDeEMsQ0FBQyxDQUNGO0FBRUEsUUFBSSx5QkFBUSxXQUFXLEVBQ3RCLFFBQVEsd0JBQXdCLEVBQ2hDLFFBQVEsc0RBQXNELEVBQzlELFVBQVUsWUFBVSxPQUNuQixTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsRUFDN0MsU0FBUyxXQUFTO0FBQ2xCLFdBQUssT0FBTyxTQUFTLGtCQUFrQjtBQUFBLElBQ3hDLENBQUMsQ0FDRjtBQUFBLEVBRUQ7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
